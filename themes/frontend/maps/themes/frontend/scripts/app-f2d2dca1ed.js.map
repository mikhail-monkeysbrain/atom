{"version":3,"sources":["themes/frontend/scripts/app.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","views","content@","templateUrl","controller","url","otherwise","$injector","get","go","$scope","$state","$location","EntityAPIService","$cookies","pageNotFound","locale","getTextPage","then","response","data","total","pageContent","en_content","content","abstract","foo","AuthService","toastr","user","makeRegistration","enabled","register","success","error","message","Lazy","each","$rootScope","$document","$http","SessionService","RestrictionsService","$stateParams","loginPeriod","baseURL","yearFuther","rememberMe","email","password","is","hidePanels","authorized","undefined","getSessionID","setSessionID","logout","remove","resetPermissions","makeLogin","login","loginExpirationDate","Date","tokenCookieParams","path","setTime","getTime","expires","token","setUserID","_id","$id","userName","name","put","$provide","decorator","$delegate","AuthServiceMock","debug","service","$httpParamSerializer","this","getRestrictions","RestrictionsAPIServiceMock","EntityAPIServiceMock","getEntities","getEntitiesList","entity","getEntityDescription","getEntityPage","page","limit","getEntity","id","saveEntity","removeEntity","filter","conditions","sort","sortOrder","isObject","i","sortField","searchKeywords","search","isNew","hasFileField","saveMethod","post","headers","X-Requested-With","Content-Type","Accept","exportEntity","length","push","element","form","html","cond","append","attr","action","submit","getLinkedEntities","condition","queries","j","join","request","file","indexOf","properties","handleErrorPages","directive","restrict","scope","scheme","fieldName","field","linkedEntity","link","$element","attrs","type","fields","find","item","findWhere","multiple","foundEntities","map","fieldItem","linkedItem","title","compact","toArray","fieldLabel","format","moment","sec","showGlobalPopup","errorMessage","$uibModal","openDocumentPopup","open","animation","windowClass","size","resolve","$watch","console","log","$uibModalInstance","closePopup","dismiss","entityModel","list","model","entityItem","today","dt","datetimepicker","useCurrent","defaultDate","extraFormats","on","date","val","toString","replace","trigger","value","Session","getUserID","userId","expireDate","sessionId","$q","RestrictionsAPIService","getPermissionsMap","isDefined","permissionsMap","when","hasPermissions","stateParts","split","routes","$window","changeText","lang","currentLocale","changeLocale","location","reload","EntityServiceMock","entities","all","run","sessionID","$on","event","to","toParams","from","activePage","activeEntity","permission","authUrls","contains","constant","$translateProvider","injector","invoke","_$cookies_","useUrlLoader","preferredLanguage","$locationProvider","html5Mode","hostname","$logProvider","$httpProvider","defaults","interceptors","remember","homepage","responseError","rejection","status","reject","options","timeOut","positionClass","preventDuplicates","closeButton","$templateCache"],"mappings":"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","file":"themes/frontend/scripts/app-f2d2dca1ed.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular\n    .module('page', [])\n    .config(function($stateProvider, $urlRouterProvider) {\n\n      $stateProvider\n        .state('customHandler', {\n          views: {\n            'content@': {\n              templateUrl: 'app/modules/page/page.html',\n              controller: 'CustomPageCtrl'\n            }\n          }\n        });\n\n      $stateProvider\n        .state('page', {\n          url:  '/page',\n          views: {\n            'content@': {\n              templateUrl: 'app/modules/page/page.html',\n              controller: 'TestPageCtrl'\n            }\n          }\n        });\n\n      $urlRouterProvider.otherwise(function($injector) {\n        $injector.get('$state').go('customHandler');\n      });\n\n    });\n\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('page')\n    .controller('CustomPageCtrl', function($scope, $state, $location, EntityAPIService, $cookies) {\n\n      var url = $location.url();\n      var locale = $cookies.get('curLocale') || 'ru';\n\n      EntityAPIService.getTextPage(url).then(function(response) {\n        if(response.data.total > 0) {\n          if(locale === 'en') {\n            $scope.pageContent = response.data.data[0].en_content;\n          } else {\n            $scope.pageContent = response.data.data[0].content;\n          }\n        } else {\n          pageNotFound();\n        }\n      });\n\n      function pageNotFound() {\n        if($state.get('error404') !== null) {\n          $state.go('error404');\n        } else {\n          $state.go('app');\n        }\n      }\n\n    });\n\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('demo', [])\n    .config(function($stateProvider) {\n\n      $stateProvider\n        .state('app.demo', {\n          url:        'demo'\n          , abstract: true\n        })\n      ;\n\n      $stateProvider\n        .state('app.demo.index', {\n          url: ''\n          , views: {\n            'content@': {\n              templateUrl:  'app/modules/demo/demo.html'\n              , controller: 'DemoCtrl'\n            }\n          }\n        })\n        .state('app.demo.read', {\n          url: '/:id'\n          , views: {\n            'content@': {\n              templateUrl:  'app/modules/demo/read/demoRead.html'\n              , controller: 'DemoReadCtrl'\n            }\n          }\n        })\n      ;\n    });\n\n})();\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('demo')\r\n    .controller('DemoReadCtrl', function($scope) {\r\n\r\n      $scope.foo = 'test'\r\n\r\n    });\r\n\r\n})();\n(function() {\n'use strict';\n\n  angular.module('authorization', [])\n    .config(function($stateProvider) {\n\n//TODO: Refactor!\n      $stateProvider\n        .state('login', {\n          url: '/login',\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/authorization/signin/authorization.html',\n              controller: 'AuthorizationCtrl'\n            }\n          }\n        })\n        .state('logout', {\n          url: '/logout',\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/authorization/signin/authorization.html',\n              controller: 'AuthorizationCtrl'\n            }\n          }\n        })\n        .state('register', {\n          url: '/signup',\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/authorization/signup/registration.html',\n              controller: 'RegistrationCtrl'\n            }\n          }\n        })\n        ;\n    })\n    ;\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('authorization')\n    .controller('RegistrationCtrl', function($scope, $state, AuthService, toastr) {\n      $scope.user = {};\n      $scope.makeRegistration = function() {\n        $scope.user.enabled = true;\n        AuthService.register($scope.user).then(function(response) {\n\n          if(response.data.success) {\n            toastr.success('Вы успешно зарегистрированы');\n            $state.go('login');\n          } else {\n            toastr.error(response.data.error.message);\n          }\n        },function(response) {\n          if(response.data.error && response.data.error.null) {\n            Lazy(response.data.error.null).each(function(error) {\n              toastr.error(error.message);\n            });\n          }\n        });\n      };\n\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('authorization')\n    .controller('AuthorizationCtrl', function($scope, $rootScope, $state, $document, $http, $cookies, AuthService, toastr, SessionService, RestrictionsService, $stateParams, loginPeriod, baseURL) {\n\n      var yearFuther = 1000*60*60*24*365;\n      $scope.rememberMe = true;\n\n      //TODO: FOr development\n      $scope.user = {\n        email: 'kamal@hismith.ru',\n        password: 'multipass'\n      }\n\n      if($state.is('logout')) {\n        $rootScope.hidePanels = true;\n        $rootScope.authorized = false;\n        if(SessionService.getSessionID() !== undefined) {\n          SessionService.setSessionID(undefined);\n          AuthService.logout().then(function() {\n            $cookies.remove('token');\n            $cookies.remove('rememberMe');\n            RestrictionsService.resetPermissions().then(function() {\n              $state.go('app');\n            });\n          });\n        }\n        $state.go('login');\n      }\n\n      $scope.makeLogin = function() {\n        AuthService.login($scope.user)\n          .then(function(response) {\n            if(response.data.success) {\n\n              var loginExpirationDate = new Date();\n              var tokenCookieParams = {\n                path: '/'\n              };\n\n              if($scope.rememberMe) {\n                loginExpirationDate.setTime( loginExpirationDate.getTime() + yearFuther );\n              }else{\n                loginExpirationDate.setTime( loginExpirationDate.getTime() + loginPeriod );\n              }\n\n              tokenCookieParams.expires = loginExpirationDate;\n\n\n              SessionService.setSessionID(response.data.success.user.token);\n              SessionService.setUserID(response.data.success.user._id.$id);\n              toastr.success(response.data.success.message);\n\n              $rootScope.authorized = true;\n              $rootScope.userName = response.data.success.user.name;\n              $cookies.put('token', response.data.success.user.token, tokenCookieParams);\n              $cookies.put('rememberMe', $scope.rememberMe ? 1 : 0, tokenCookieParams);\n\n              RestrictionsService.resetPermissions().then(function() {\n                $state.go('app');\n              });\n\n\n            } else {\n              toastr.error(response.data.error.message);\n            }\n          })\n\n      };\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.auth', [])\n    .config(function($provide) {\n      $provide.decorator('AuthService', function($delegate, $location, AuthServiceMock, debug) {\n        if (debug) {\n          $delegate = AuthServiceMock;\n        }\n        return $delegate;\n      });\n    })\n  ;\n\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('rest.auth')\r\n    .service('RestrictionsAPIService', function($http, $httpParamSerializer, baseURL) {\r\n\r\n      this.getRestrictions = function() {\r\n        return $http.get(baseURL + '/atom/entities/?fields=routes');\r\n      };\r\n\r\n    });\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('rest.restrictionsAPI', [])\r\n    .config(function($provide) {\r\n      $provide.decorator('RestrictionsAPIService', function($delegate, $location, RestrictionsAPIServiceMock, debug) {\r\n        if (debug) {\r\n          $delegate = RestrictionsAPIServiceMock;\r\n        }\r\n        return $delegate;\r\n      });\r\n    })\r\n  ;\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('rest.restrictionsAPI')\r\n    .service('RestrictionsAPIServiceMock', function($http) {\r\n\r\n      this.getRestrictions = function() {\r\n        return $http.get('/app/rest/restrictions/fixture/restrictions.json');\r\n      };\r\n\r\n    });\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular.module('rest.entity', [])\n    .config(function($provide) {\n      $provide.decorator('EntityAPIService', function($delegate, EntityAPIServiceMock, debug) {\n        if (debug) {\n          $delegate = EntityAPIServiceMock;\n        }\n        return $delegate;\n      });\n    })\n  ;\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.entity')\n    .service('EntityAPIServiceMock', function($http, $httpParamSerializer) {\n\n      this.getEntities = function() {\n        return $http.get('/app/rest/entity/fixture/entities.json');\n      };\n\n      this.getEntitiesList = function(entity) {\n        return $http.get('/app/rest/entity/fixture/usersList.json');\n      };\n\n      this.getEntityDescription = function(entity) {\n        return $http.get('/app/rest/entity/fixture/usersDescription.json');\n      };\n\n      this.getEntityPage = function(entity, page, limit) {\n        if(page === 0) {\n          return $http.get('/app/rest/entity/fixture/usersPage1.json');\n        } else {\n          return $http.get('/app/rest/entity/fixture/usersPage2.json');\n        }\n      };\n\n      this.getEntity = function(entity, id) {\n        return $http.get('/app/rest/entity/fixture/userExample.json');\n      };\n\n      this.saveEntity = function(entity, data) {\n        return $http.get('/app/rest/entity/fixture/userSaved.json', $httpParamSerializer(data));\n      };\n\n      this.removeEntity = function(entity, data) {\n        return $http.get('/app/rest/entity/fixture/userSaved.json', $httpParamSerializer(data));\n      };\n\n      this.getTextPage = function(url) {\n        if(url == '/page1') {\n          return $http.get('app/rest/entity/fixture/page.json');\n        } else {\n          return $http.get('app/rest/entity/fixture/pageNotFound.json');\n        }\n      }\n\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.entity')\n    .service('EntityAPIService', function($http, $httpParamSerializer, baseURL) {\n      var service = this;\n      this.getEntities = function(filter) {\n        var conditions = filter ? '?condition[name]=' + filter : '';\n        return $http.get(baseURL + '/atom/entities/' + conditions);\n      };\n\n      this.getEntitiesList = function(entity, limit, sort) {\n        limit = limit || 0;\n        var sortOrder = '';\n        if(angular.isObject(sort)) {\n          for(var i in sort) {\n            sortOrder += '&sort[' + i + ']=' + sort[i];\n          }\n        }\n\n        return $http.get(baseURL + '/' + entity + \"/?condition[enabled][$ne]=null&limit=\" + limit + sortOrder);\n      };\n\n      this.getEntityDescription = function(entity) {\n        return service.getEntities(entity);\n        //return $http.get(baseURL + '/atom/entities/' + entity + '/');\n      };\n\n      this.getEntityPage = function(entity, page, limit, sortField, sortOrder, searchKeywords) {\n        var sort = !!(sortField && sortOrder) ? '&sort[' + sortField + ']=' + sortOrder : '';\n        var search = !!searchKeywords ? '&condition[$search]=' + searchKeywords : '';\n        return $http.get(baseURL + '/' + entity + '/page/' + page + '/?condition[enabled][$ne]=null&limit=' + limit + sort + search);\n      };\n\n      this.getEntity = function(entity, id) {\n        return $http.get(baseURL + '/' + entity + '/' + id + '/');\n      };\n\n      this.saveEntity = function(entity, data, isNew, hasFileField) {\n        var saveMethod = typeof data._id === 'undefined' && isNew ? 'create' : 'update';\n\n        if(hasFileField){\n          return $http.post(baseURL + '/' + entity + '/' + saveMethod + '/', data, {headers: {\n            'X-Requested-With': 'XMLHttpRequest'\n            , 'Content-Type':     undefined\n            , 'Accept':           'application/json'\n          }} );\n        } else {\n          return $http.post(baseURL + '/' + entity + '/' + saveMethod + '/', $httpParamSerializer(data));\n        }\n\n      };\n\n      this.removeEntity = function(entity, data) {\n        return $http.post(baseURL + '/' + entity + '/delete/', $httpParamSerializer(data));\n      };\n\n      this.exportEntity = function(entity, data, sortField, sortOrder) {\n        var conditions = [];\n        //var condition = 'condition[_id][$in][]=561fe8ae572b94d3358b4567&condition[_id][$in][]=5613e72e572b94274d8b4567&condition[_id][$in][]=5613e6e3572b94114d8b4567';\n        if(data.length) {\n          for(var i = 0; i < data.length; i++) {\n            conditions.push(angular.element('<input type=\"hidden\" name=\"condition[_id][$in][]\" value=\"' + data[i] + '\">'));\n          }\n        }\n\n\n        var form = angular.element('#downloadForm');\n        form.html('');\n        var limit = angular.element('<input type=\"hidden\" name=\"limit\" value=\"0\">');\n        var sort = !!(sortField && sortOrder) ? angular.element('<input type=\"hidden\" name=\"sort[' + sortField + ']\" value=\"' + sortOrder + '\">') : '';\n        Lazy(conditions).each(function(cond) {\n          form.append(cond);\n        });\n        form.append(limit);\n        form.append(sort);\n        form.attr({\n          action: '/' + entity + '/export/'\n        })[0].submit();\n      };\n\n      this.getLinkedEntities = function(entity, data) {\n        var condition = [];\n        var queries = [];\n        if(data.length) {\n          var i, j;\n          for(i = 0, j = 0; i < data.length; i++, j++) {\n            if (data[i]) {\n              condition.push('condition[_id][$in][]=' + data[i].$id);\n            }\n            if(j == 19 || i == data.length-1) {\n              condition = condition.join('&');\n              queries.push($http.get(baseURL + '/' + entity + '/?' + condition + '&limit=0'));\n              j = -1;\n              condition = [];\n            }\n          }\n        }\n\n        return queries;\n      };\n\n      this.getTextPage = function(url) {\n        return $http.get(baseURL + '/page/?limit=0&condition[url]=' + url);\n      }\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.auth')\n    .service('AuthServiceMock', function($http) {\n      this.logout = function() {\n        return $http.get('/app/rest/auth/fixture/logout_success.json');\n      };\n\n      this.login = function(request) {\n\n        var file = (request.email.indexOf('test') === 0)\n          ? 'auth.json'\n          : 'auth_fail.json'\n          ;\n\n        return $http.get('/app/rest/auth/fixture/' + file);\n      };\n\n      this.register = function(request) {\n\n        var file = (request.email.indexOf('test') === 0)\n            ? 'register.json'\n            : 'register_fail.json'\n          ;\n\n        return $http.get('/app/rest/auth/fixture/' + file);\n      };\n\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.auth')\n    .service('AuthService', function($http, $httpParamSerializer, baseURL) {\n      this.logout = function() {\n        return $http.get(baseURL + '/user/logout/');\n      };\n\n      this.login = function(request) {\n        return $http.post(baseURL + '/user/auth/pass/', $httpParamSerializer(request));\n      };\n\n      this.register = function(request) {\n        return $http.post(baseURL + '/user/create/', $httpParamSerializer(request));\n      };\n\n\n      this.properties = function() {\n        return $http.get(baseURL + '/atom/properties/');\n      };\n\n    });\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('page')\n    .controller('TestPageCtrl', function($scope) {\n\n      $scope.pageContent = 'test page'\n\n    });\n\n})();\n(function() {\n  'use strict';\n\n  angular.module('errorPage', [ ])\n    .config(function($stateProvider) {\n\n      $stateProvider\n        .state('error500', {\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/errorPage/500.html',\n              controller: 'ErrorPageCtrl'\n            }\n          }\n        })\n      ;\n\n      $stateProvider\n        .state('error404', {\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/errorPage/404.html',\n              controller: 'ErrorPageCtrl'\n            }\n          }\n        })\n      ;\n    })\n  ;\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('errorPage')\n    .controller('ErrorPageCtrl', function($scope, $state, handleErrorPages) {\n      if(!handleErrorPages) {\n        $state.go('app');\n      }\n    });\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('demo')\n    .controller('DemoCtrl', function($scope) {\n\n      $scope.foo = 'test'\n\n    });\n\n})();\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomListField', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomListField')\r\n    .directive('atomListField', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '=',\r\n          linkedEntity: '='\r\n        },\r\n        templateUrl: 'app/directives/atomListField/atomListField.html',\r\n        link: function($scope, $element, attrs) {\r\n          if($scope.scheme.type === 'entity') {\r\n            var linkedEntity = Lazy($scope.linkedEntity.data.data).find(function (item) {\r\n              return Lazy($scope.field).findWhere({$id: item._id.$id});\r\n            });\r\n\r\n            var fields = $scope.scheme.multiple ? $scope.field : [$scope.field];\r\n\r\n            var foundEntities = Lazy(fields)\r\n              .map(function(fieldItem) {\r\n                return Lazy($scope.linkedEntity.data.data).find(function(linkedItem) {\r\n                  return linkedItem._id.$id === fieldItem.$id;\r\n                } || {}).title;\r\n              })\r\n              .compact()\r\n              .toArray();\r\n\r\n            $scope.fieldLabel = foundEntities.join(', ');\r\n          } else if($scope.scheme.type === 'date' || $scope.scheme.type === 'time' || $scope.scheme.type === 'datetime') {\r\n\r\n            var format = $scope.scheme.type === 'time' ? 'HH:mm' : ($scope.scheme.type === 'date' ? 'DD.MM.YYYY' : 'DD.MM.YYYY HH:mm');\r\n\r\n            $scope.fieldLabel = moment($scope.field.sec * 1000).format(format);\r\n          } else {\r\n            $scope.fieldLabel = $scope.field;\r\n          }\r\n        }\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\n  'use strict';\n\n  angular.module('directives.atomGlobalPopup', []);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('directives.atomGlobalPopup')\n    .directive('atomGlobalPopup', function() {\n\n      return {\n        restrict:    'AEC',\n        scope: {\n          showGlobalPopup: '=',\n          errorMessage: '='\n        },\n        controller: function($scope, $uibModal) {\n\n        $scope.$watch('showGlobalPopup', function() {\n          console.log('showGlobalPopup', $scope.showGlobalPopup);\n          if ($scope.showGlobalPopup) {\n            $scope.showGlobalPopup = false;\n\n            openDocumentPopup();\n          }\n        });\n\n        function openDocumentPopup() {\n          var modalInstance = $uibModal.open({\n            animation:     true\n            , templateUrl: 'app/directives/atomGlobalPopup/atomGlobalPopup.html'\n            , windowClass: 'customModal'\n            , controller:  'AtomGlobalPopupCtrl'\n            , size:        'sm'\n            , scope:       $scope\n            , resolve:     {}\n          });\n\n          //modalInstance.result.then($scope.savePopupAction);\n        }\n\n      }\n      };\n    });\n\n})();\n\n\n(function() {\n  'use strict';\n\n  angular.module('directives.atomGlobalPopup')\n    .controller('AtomGlobalPopupCtrl', function(\n      $scope,\n      $uibModalInstance\n    ) {\n\n\n      $scope.closePopup = function() {\n        $uibModalInstance.dismiss('cancel');\n      };\n\n\n    });\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldString', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldString')\r\n    .directive('atomFieldString', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '='\r\n        },\r\n        templateUrl: 'app/directives/atomFieldString/atomFieldString.html',\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldPassword', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldPassword')\r\n    .directive('atomFieldPassword', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '='\r\n        },\r\n        templateUrl: 'app/directives/atomFieldPassword/atomFieldPassword.html',\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldEntity', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldEntity')\r\n    .directive('atomFieldEntity', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '=',\r\n          linkedEntity: '=',\r\n          entityModel: '='\r\n        },\r\n        templateUrl: 'app/directives/atomFieldEntity/atomFieldEntity.html',\r\n        link: function($scope) {\r\n\r\n          $scope.entityModel[$scope.fieldName] = $scope.entityModel[$scope.fieldName] || [];\r\n\r\n          var list = Lazy($scope.linkedEntity.data.data).map(function(item) {\r\n            return {\r\n              title: item.title,\r\n              id: item._id.$id\r\n            }\r\n          }).toArray();\r\n\r\n\r\n          var fields = $scope.scheme.multiple ? $scope.field : [$scope.field];\r\n\r\n          var model = Lazy(fields).map(function(fieldItem) {\r\n              return Lazy(list).find(function(entityItem) {\r\n                return entityItem.id === fieldItem.$id;\r\n              })\r\n            })\r\n            .compact()\r\n            .toArray();\r\n\r\n          $scope.entityModel[$scope.fieldName] = $scope.scheme.multiple ? model : model[0];\r\n\r\n          $scope.list = list;\r\n        }\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldDatetime', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldDatetime')\r\n    .directive('atomFieldDatetime', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '='\r\n        },\r\n        templateUrl: 'app/directives/atomFieldDatetime/atomFieldDatetime.html',\r\n        link: function($scope, $element) {\r\n\r\n          var format = $scope.scheme.type === 'time' ? 'HH:mm' : ($scope.scheme.type === 'date' ? 'DD.MM.YYYY' : 'DD.MM.YYYY HH:mm');\r\n\r\n\r\n          $scope.today = function() {\r\n            $scope.dt = new Date();\r\n            return $scope.dt;\r\n          };\r\n\r\n\r\n\r\n          $scope.dt = moment($scope.field.sec * 1000);\r\n\r\n\r\n          $element.datetimepicker({\r\n            locale: 'ru',\r\n            useCurrent: true,\r\n            defaultDate: $scope.dt,\r\n            format: format,\r\n            extraFormats: [format ]\r\n          });\r\n\r\n\r\n\r\n          $scope.$watch('dt', function() {\r\n            console.log('dt', $scope.dt);\r\n          });\r\n\r\n          $element.find('input').on('blur', function () {\r\n\r\n            var date = moment($element.find('input').val(), format);\r\n\r\n            $scope.field = (date).toString().replace(/( \\((.+)\\))/g, '');\r\n            $element.find('input').trigger('input');\r\n          })\r\n\r\n        }\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldBoolean', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldBoolean')\r\n    .directive('atomFieldBoolean', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '='\r\n        },\r\n        templateUrl: 'app/directives/atomFieldBoolean/atomFieldBoolean.html',\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\n  'use strict';\n\n  angular.module('components.session', [])\n    .value('Session', {});\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('components.session')\n    .service('SessionService', function SessionService($cookies, Session) {\n\n      this.getUserID = function() {\n        return $cookies.get('userId');\n      };\n\n      this.setUserID = function(userId) {\n        var expireDate = new Date();\n        expireDate.setTime(expireDate.getTime() + 3*60*60*1000);\n        return $cookies.put('userId', userId, { expires: expireDate });\n      };\n\n      this.setSessionID = function(sessionId) {\n        //TODO: Remove storage in cookies for prod\n        var expireDate = new Date();\n        expireDate.setTime(expireDate.getTime() + 3*60*60*1000);\n        return $cookies.put('sessionId', sessionId, { expires: expireDate });\n      };\n\n      this.getSessionID = function() {\n        return $cookies.get('sessionId');\n      };\n\n    });\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.restrictions', [])\r\n\r\n})();\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.restrictions')\r\n    .service('RestrictionsService', function RestrictionsService($q, RestrictionsAPIService) {\r\n\r\n      var service = this;\r\n\r\n      this.hasPermissions = function(state) {\r\n        return getPermissionsMap().then(function(permissionsMap) {\r\n          var stateParts = state.split('.');\r\n\r\n          if(stateParts.length === 1){\r\n            return true;\r\n          }\r\n\r\n          var entity = stateParts[1];\r\n          var action = stateParts[2];\r\n          if(entity) {\r\n            if(permissionsMap[entity]){\r\n              return angular.isDefined(permissionsMap[entity].routes[entity + '.' + action]);\r\n            }\r\n          }\r\n          return false;\r\n        })\r\n      };\r\n\r\n      this.resetPermissions = function() {\r\n        return RestrictionsAPIService.getRestrictions().then(function(response) {\r\n          service.permissionsMap = response.data;\r\n          return service.permissionsMap;\r\n        });\r\n      };\r\n\r\n\r\n      function getPermissionsMap() {\r\n        if(angular.isDefined(service.permissionsMap)) {\r\n          return $q.when(service.permissionsMap);\r\n        } else {\r\n          return RestrictionsAPIService.getRestrictions().then(function(response) {\r\n            service.permissionsMap = response.data;\r\n            return service.permissionsMap;\r\n          });\r\n        }\r\n      }\r\n\r\n    });\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular.module('components.localize', ['ngCookies']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('components.localize')\n    .directive('localize', function($cookies, $window) {\n\n      return {\n        restrict:    'E',\n        templateUrl: 'app/components/localize/localize.html',\n        link: function($scope, $element, attrs) {\n          $scope.lang = $cookies.get('curLocale') || 'ru';\n          changeText();\n\n          $scope.changeLocale = function(locale) {\n            if($scope.lang !== locale) {\n              $scope.lang = locale;\n              $cookies.put('curLocale', locale);\n              changeText();\n              $window.location.reload();\n            }\n          };\n\n          function changeText() {\n            if($scope.lang == 'en') {\n              $scope.currentLocale = 'English';\n            } else {\n              $scope.currentLocale = 'Русский';\n            }\n          }\n\n        }\n      };\n    });\n\n})();\n\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.entity', [])\r\n    .config(function($provide) {\r\n      $provide.decorator('EntityService', function($delegate, EntityServiceMock, debug) {\r\n        if (debug) {\r\n          $delegate = EntityServiceMock;\r\n        }\r\n        return $delegate;\r\n      });\r\n    })\r\n  ;\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.entity')\r\n    .service('EntityServiceMock', function($http, $httpParamSerializer) {\r\n\r\n\r\n    });\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.entity')\r\n    .service('EntityService', function($q, EntityAPIService) {\r\n      var service = this;\r\n\r\n      service.getLinkedEntities = function(scheme) {\r\n        var entities = Lazy(scheme)\r\n          .map(function(item) {\r\n            if(item.type === 'entity') {\r\n              return EntityAPIService.getEntitiesList(item.entity.model, 0, 0).then(function(response) {\r\n                return {\r\n                  entity: item.entity.model,\r\n                  data: response.data\r\n                };\r\n              });\r\n            }\r\n          })\r\n          .compact()\r\n          .toArray();\r\n\r\n        return $q.all(entities);\r\n      };\r\n    });\r\n\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular.module('app', [\n    'ui.router',\n    'ui.bootstrap',\n    'ngAnimate',\n    'ngTouch',\n    'ngCookies',\n    'ngSanitize',\n    'pascalprecht.translate',\n    'localytics.directives',\n\n    'components.session',\n    'components.restrictions',\n    'components.localize',\n    'components.entity',\n\n    'directives.atomListField',\n    'directives.atomFieldString',\n    'directives.atomFieldPassword',\n    'directives.atomFieldBoolean',\n    'directives.atomFieldEntity',\n    'directives.atomFieldDatetime',\n    'directives.atomGlobalPopup',\n\n    'rest.auth',\n    'rest.restrictionsAPI',\n    'rest.entity',\n\n\n    'demo',\n    'authorization',\n    'page',\n    'errorPage'\n  ]);\n})();\n(function() {\n  'use strict';\n\n  angular.module('app')\n    .run(function($rootScope, $state, $http, SessionService, RestrictionsService) {\n\n      var sessionID = SessionService.getSessionID();\n\n      if(sessionID) {\n        $rootScope.authorized = true;\n      }\n\n      $rootScope.$on('$stateChangeSuccess', function(event, to, toParams, from) {\n\n        $rootScope.activePage = to.name;\n        $rootScope.activeEntity = to.name === 'pagesList' ? 'page' : toParams.entity;\n\n        if(from.name == \"error500\") {\n          $rootScope.activePage = to.name;\n          $rootScope.activeEntity = toParams.entity;\n          $rootScope.hidePanels = false;\n        }\n\n        RestrictionsService.hasPermissions(to.name).then(function(permission) {\n          if(!permission) {$state.go('app')};\n        });\n\n        var authUrls = [ 'login', 'logout' ],\n          sessionID = SessionService.getSessionID();\n\n        //if(sessionID){\n        //  $rootScope.authorized = true;\n        //  EntityService.getEntity('user', SessionService.getUserID()).then(function(response) {\n        //    if(response.data.error && response.data.error.code == 403) {\n        //      $state.go('logout');\n        //    } else {\n        //      $rootScope.userName = response.data.data[0].title;\n        //    }\n        //  }, function() {\n        //    $state.go('logout');\n        //  });\n        //}\n\n        if (!Lazy(authUrls).contains(to.name) && !sessionID) {\n          //$state.go('logout');\n        }\n\n        if (sessionID && to.name === 'login') {\n          $state.go('app');\n        }\n      });\n\n    })\n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .constant('toastr', toastr)\n    .constant('baseURL', '')\n    .constant('debug', false)\n    .constant('handleErrorPages', true)\n    .constant('loginPeriod', (30*60*1000) );\n\n})();\n(function() {\n  'use strict';\n\n  angular.module('app')\n\n    .config(function($stateProvider, $urlRouterProvider) {\n      $stateProvider\n        .state('app', {\n          url:        '/'\n        })\n      ;\n\n      $urlRouterProvider.otherwise(function($injector) {\n        $injector.get('$state').go('customHandler');\n      });\n    })\n\n    .config(function($translateProvider, baseURL, debug) {\n      var $cookies;\n      angular.injector(['ngCookies']).invoke(['$cookies', function(_$cookies_) {\n        $cookies = _$cookies_;\n      }]);\n\n      var lang = $cookies.get('curLocale') || 'en';\n      if(debug) {\n        $translateProvider.useUrlLoader('app/rest/localize/fixture/translate_' + lang + '.json');\n      } else {\n        $translateProvider.useUrlLoader(baseURL + '/atom/locales/?condtition[locale]=' + lang);\n      }\n      $translateProvider.preferredLanguage(lang);\n    })\n\n    .config(function($locationProvider) {\n      //TODO: Comment for development. There are problems with proxy in HTML5mode\n      $locationProvider.html5Mode(location.hostname !== 'localhost');\n    })\n\n    .config(function($logProvider, $httpProvider, $stateProvider, toastr) {\n\n      $httpProvider.defaults.headers.post = {'Accept': 'application/json', 'Content-Type': 'application/x-www-form-urlencoded'};\n      $httpProvider.defaults.headers.get = {'Accept': 'application/json'};\n\n      $httpProvider.interceptors.push(function($q, $injector, loginPeriod) {\n        return {\n          request: function(config) {\n            var remember = $injector.get('$cookies').get('rememberMe');\n            var token = $injector.get('$cookies').get('token');\n            var homepage = $injector.get('$cookies').get('homepage');\n\n            if(token && remember === '0') {\n              var loginExpirationDate = new Date();\n              loginExpirationDate.setTime( loginExpirationDate.getTime() + loginPeriod );\n              var tokenCookieParams = {\n                expires: loginExpirationDate,\n                path: '/'\n              };\n              $injector.get('$cookies').put('token', token, tokenCookieParams);\n              $injector.get('$cookies').put('rememberMe', token, tokenCookieParams);\n              $injector.get('$cookies').put('homepage', homepage, tokenCookieParams);\n            }\n\n            return config;\n          },\n          responseError:  function(rejection) {\n            if(rejection.status == 500){\n              $injector.get('$rootScope').errorMessage = rejection.data.error.message;\n              $injector.get('$rootScope').showGlobalPopup = true;\n            }\n            if(rejection.status == 401) {\n              $injector.get('$state').go('logout');\n            } else if(rejection.status == 400) {\n              if(rejection.data.error.message)\n                toastr.error(rejection.data.error.message);\n            } else if(rejection.status == 404) {\n              $injector.get('$rootScope').errorMessage = rejection.data.error.message;\n              $injector.get('$rootScope').showGlobalPopup = true;\n            } else {\n              Lazy(rejection.data.error.null).each(function(error) {\n                if(error.message)\n                  toastr.error(error.message);\n              });\n            }\n\n            return $q.reject(rejection);\n          }\n        };\n      });\n\n    })\n\n    .config(function(toastr) {\n      toastr.options.timeOut = 3000;\n      toastr.options.positionClass = 'toast-top-right';\n      toastr.options.preventDuplicates = false;\n      toastr.options.closeButton = true;\n    });\n})();\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/localize/localize.html\",\"<ul class=\\\"nav navbar-nav navbar-right localize\\\"><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false><img ng-src=app/assets/{{lang}}.gif>{{ currentLocale }}<span class=caret></span></a><ul class=dropdown-menu><li><a ng-click=\\\"changeLocale(\\'en\\')\\\" href=#><img src=/themes/frontend/app/assets/en.gif> English</a></li><li><a ng-click=\\\"changeLocale(\\'ru\\')\\\" href=#><img src=/themes/frontend/app/assets/ru.gif> Русский</a></li></ul></li></ul>\");\n$templateCache.put(\"app/directives/atomFieldBoolean/atomFieldBoolean.html\",\"<span class=input-group-addon><input type=checkbox id=\\\"{{ itemName }}\\\" ng-model=field> </span>\");\n$templateCache.put(\"app/directives/atomFieldDatetime/atomFieldDatetime.html\",\"<input type=text class=form-control id={{fieldName}} name={{fieldName}}> <span class=input-group-addon><i class=fa ng-class=\\\"{\\r\\n    \\'fa-calendar\\': (scheme.type === \\'date\\' || scheme.type === \\'datetime\\'),\\r\\n    \\'fa-clock-o\\':  scheme.type === \\'time\\'\\r\\n    }\\\"></i> </span>\");\n$templateCache.put(\"app/directives/atomFieldEntity/atomFieldEntity.html\",\"<select ng-if=scheme.multiple chosen no_results_text=\\\"\\'Результат не найден\\'\\\" placeholder-text-multiple=\\\"\\'Выберите один или несколько вариантов\\'\\\" placeholder-text-single=\\\"\\'Выберите один вариант\\'\\\" multiple ng-options=\\\"b as b.title for b in list track by b.id\\\" ng-model=entityModel[fieldName]><option value=\\\"\\\"></option></select><select ng-if=!scheme.multiple chosen no_results_text=\\\"\\'Результат не найден\\'\\\" placeholder-text-multiple=\\\"\\'Выберите один или несколько вариантов\\'\\\" placeholder-text-single=\\\"\\'Выберите один вариант\\'\\\" ng-options=\\\"b as b.title for b in list track by b.id\\\" ng-model=entityModel[fieldName]><option value=\\\"\\\"></option></select>\");\n$templateCache.put(\"app/directives/atomFieldPassword/atomFieldPassword.html\",\"<input autocomplete=off id=\\\"{{ itemName }}\\\" placeholder=\\\"\\\" type=password class=form-control ng-model=field>\");\n$templateCache.put(\"app/directives/atomFieldString/atomFieldString.html\",\"<input autocomplete=off id=\\\"{{ itemName }}\\\" placeholder=\\\"\\\" type=text class=form-control ng-model=field>\");\n$templateCache.put(\"app/directives/atomGlobalPopup/atomGlobalPopup.html\",\"<div class=modal-header><h3 class=modal-title>Внимание!</h3></div><div class=modal-body><p>{{ errorMessage }}</p></div><div class=modal-footer><button class=\\\"btn btn-primary\\\" type=button ng-click=closePopup()>Закрыть</button></div>\");\n$templateCache.put(\"app/directives/atomListField/atomListField.html\",\"{{ fieldLabel }}\");\n$templateCache.put(\"app/modules/demo/demo.html\",\"<div class=row><h1 class=demoTitle>DEMO</h1><p class=lead>Use this document as a way to quickly start any new project.<br>All you get is this text and a mostly barebones HTML document.</p><p class=lead localize>test</p></div>\");\n$templateCache.put(\"app/modules/errorPage/404.html\",\"<div class=page-err><div class=\\\"err-container text-center\\\"><div class=err><div class=err-inner><h1>404</h1><h2>Not Found</h2></div></div><div class=err-mss><p>{{$root.errorMessage}}</p></div><div class=err-body><a ui-sref=app class=\\\"btn btn-lg btn-primary\\\"><span class=space></span> Вернуться на главную</a></div></div><!--     <div class=\\\"footer text-center\\\">\\n            Copyright 2016 {{main.brand}} Admin\\n        </div> --></div>\");\n$templateCache.put(\"app/modules/errorPage/500.html\",\"<div class=page-err><div class=\\\"err-container text-center\\\"><div class=err><div class=err-inner><h1>500</h1><h2>Server Error</h2></div></div><div class=err-mss><p>{{$root.errorMessage}}</p></div><div class=err-body><a ui-sref=app class=\\\"btn btn-lg btn-primary\\\"><span class=space></span> Вернуться на главную</a></div></div><!--     <div class=\\\"footer text-center\\\">\\n            Copyright 2016 {{main.brand}} Admin\\n        </div> --></div>\");\n$templateCache.put(\"app/modules/page/page.html\",\"<div class=pageContent ng-bind-html=pageContent></div>\");\n$templateCache.put(\"app/modules/authorization/signin/authorization.html\",\"<div class=page-signin><div class=main-body><div class=container><div class=form-container><form class=form-horizontal ng-submit=makeLogin() autocomplete=off><fieldset><input style=display:none> <input type=password style=display:none><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-envelope\\\"></span></div><input type=email class=\\\"form-control input-lg input-round text-center\\\" placeholder=Email ng-model=user.email></div><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-lock\\\"></span></div><input type=password class=\\\"form-control input-lg input-round text-center\\\" placeholder=Пароль ng-model=user.password></div><div class=form-group><label class=\\\"ui-checkbox rememberMeLabel\\\"><input name=checkbox1 type=checkbox value=option2 ng-model=rememberMe> <span>Запомнить меня</span></label></div><div class=form-group><input type=submit class=\\\"btn btn-primary btn-lg btn-round btn-block text-center\\\" value=Войти></div></fieldset></form></div></div></div></div>\");\n$templateCache.put(\"app/modules/authorization/signup/registration.html\",\"<div class=page-signin><div class=main-body><div class=container><div class=form-container><form class=form-horizontal ng-submit=makeRegistration() autocomplete=off><fieldset><input style=display:none> <input type=password style=display:none><div class=form-group><input type=text class=\\\"form-control input-lg input-round text-center\\\" placeholder=Name ng-model=user.title></div><div class=form-group><input type=email class=\\\"form-control input-lg input-round text-center\\\" placeholder=Email ng-model=user.email></div><div class=form-group><input type=password class=\\\"form-control input-lg input-round text-center\\\" placeholder=Пароль ng-model=user.password></div><div class=form-group><input type=submit class=\\\"btn btn-primary btn-lg btn-round btn-block text-center\\\" value=Зарегистироваться></div></fieldset></form></div></div></div></div>\");\n$templateCache.put(\"app/modules/demo/read/demoRead.html\",\"<h1>DEMO READ</h1><p class=lead translate>test</p>\");}]);"],"sourceRoot":"/source/"}
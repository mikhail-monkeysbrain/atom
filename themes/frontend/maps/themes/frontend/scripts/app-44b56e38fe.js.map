{"version":3,"sources":["themes/frontend/scripts/app.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","views","content@","templateUrl","controller","url","otherwise","$injector","get","go","$scope","$state","$location","EntityAPIService","$cookies","pageNotFound","locale","getTextPage","then","response","data","total","pageContent","en_content","content","abstract","foo","AuthService","makeRegistration","register","user","success","toastr","message","error","$rootScope","$document","$http","SessionService","RestrictionsService","$stateParams","loginPeriod","baseURL","yearFuther","rememberMe","email","password","is","hidePanels","authorized","undefined","getSessionID","setSessionID","logout","remove","resetPermissions","makeLogin","login","loginExpirationDate","Date","tokenCookieParams","path","setTime","getTime","expires","token","setUserID","_id","$id","userName","name","put","$provide","decorator","$delegate","AuthServiceMock","debug","service","$httpParamSerializer","this","getRestrictions","RestrictionsAPIServiceMock","EntityAPIServiceMock","getEntities","getEntitiesList","entity","getEntityDescription","getEntityPage","page","limit","getEntity","id","saveEntity","removeEntity","filter","conditions","sort","sortOrder","isObject","i","sortField","searchKeywords","search","isNew","hasFileField","saveMethod","post","headers","X-Requested-With","Content-Type","Accept","exportEntity","length","push","element","form","html","Lazy","each","cond","append","attr","action","submit","getLinkedEntities","condition","queries","j","join","request","file","indexOf","properties","directive","restrict","scope","scheme","fieldName","field","linkedEntity","link","$element","attrs","type","foundEntities","find","item","findWhere","map","fieldItem","linkedItem","title","compact","toArray","fieldLabel","entityModel","list","entityItem","value","Session","getUserID","userId","expireDate","sessionId","$q","RestrictionsAPIService","getPermissionsMap","isDefined","permissionsMap","when","hasPermissions","stateParts","split","routes","$window","changeText","lang","currentLocale","changeLocale","location","reload","EntityServiceMock","entities","model","all","run","sessionID","$on","event","to","toParams","from","activePage","activeEntity","permission","authUrls","contains","constant","$translateProvider","injector","invoke","_$cookies_","useUrlLoader","preferredLanguage","$locationProvider","html5Mode","$logProvider","$httpProvider","defaults","interceptors","remember","homepage","responseError","rejection","status","errorMessage","reject","options","timeOut","positionClass","preventDuplicates","closeButton","$templateCache"],"mappings":"CAAA,WACE,YAEAA,SACGC,OAAO,WACPC,QAAA,iBAAA,qBAAO,SAASC,EAAgBC,GAE/BD,EACGE,MAAM,iBACLC,OACEC,YACEC,YAAa,6BACbC,WAAY,qBAKpBN,EACGE,MAAM,QACLK,IAAM,QACNJ,OACEC,YACEC,YAAa,6BACbC,WAAY,mBAKpBL,EAAmBO,UAAU,SAASC,GACpCA,EAAUC,IAAI,UAAUC,GAAG,yBAMnC,WACE,YAEAd,SACGC,OAAO,QACPQ,WAAW,kBAAA,SAAA,SAAA,YAAA,mBAAA,WAAkB,SAASM,EAAQC,EAAQC,EAAWC,EAAkBC,GAiBlF,QAASC,KACuB,OAA3BJ,EAAOH,IAAI,YACZG,EAAOF,GAAG,YAEVE,EAAOF,GAAG,OAnBd,GAAIJ,GAAMO,EAAUP,MAChBW,EAASF,EAASN,IAAI,cAAgB,IAE1CK,GAAiBI,YAAYZ,GAAKa,KAAK,SAASC,GAC3CA,EAASC,KAAKC,MAAQ,EACT,OAAXL,EACDN,EAAOY,YAAcH,EAASC,KAAKA,KAAK,GAAGG,WAE3Cb,EAAOY,YAAcH,EAASC,KAAKA,KAAK,GAAGI,QAG7CT,YAeV,WACE,YAEApB,SACGC,OAAO,WACPC,QAAA,iBAAO,SAASC,GAEfA,EACGE,MAAM,YACLK,IAAY,OACVoB,YAAU,IAIhB3B,EACGE,MAAM,kBACLK,IAAK,GACHJ,OACAC,YACEC,YAAc,6BACZC,WAAY,eAInBJ,MAAM,iBACLK,IAAK,OACHJ,OACAC,YACEC,YAAc,sCACZC,WAAY,yBAQ5B,WACE,YAEAT,SACGC,OAAO,QACPQ,WAAW,gBAAA,SAAgB,SAASM,GAEnCA,EAAOgB,IAAM,aAKnB,WACA,YAEE/B,SAAQC,OAAO,oBACZC,QAAA,iBAAO,SAASC,GAGfA,EACGE,MAAM,SACLK,IAAK,SACLJ,OACEC,YACEC,YAAc,sDACdC,WAAY,wBAIjBJ,MAAM,UACLK,IAAK,UACLJ,OACEC,YACEC,YAAc,sDACdC,WAAY,wBAIjBJ,MAAM,YACLK,IAAK,UACLJ,OACEC,YACEC,YAAc,qDACdC,WAAY,6BAS1B,WACE,YAEAT,SAAQC,OAAO,iBACZQ,WAAW,oBAAA,SAAA,SAAA,cAAoB,SAASM,EAAQC,EAAQgB,GAEvDjB,EAAOkB,iBAAmB,WACxBD,EAAYE,SAASnB,EAAOoB,MAAMZ,KAAK,SAASC,GAE3CA,EAASC,KAAKW,SACfC,OAAOD,QAAQZ,EAASC,KAAKW,QAAQE,SACrCtB,EAAOF,GAAG,UAEVuB,OAAOE,MAAMf,EAASC,KAAKc,MAAMD,kBAQ7C,WACE,YAEAtC,SAAQC,OAAO,iBACZQ,WAAW,qBAAA,SAAA,aAAA,SAAA,YAAA,QAAA,WAAA,cAAA,SAAA,iBAAA,sBAAA,eAAA,cAAA,UAAqB,SAASM,EAAQyB,EAAYxB,EAAQyB,EAAWC,EAAOvB,EAAUa,EAAaK,EAAQM,EAAgBC,EAAqBC,EAAcC,EAAaC,GAErL,GAAIC,GAAa,OACjBjC,GAAOkC,YAAa,EAGpBlC,EAAOoB,MACLe,MAAO,mBACPC,SAAU,aAGTnC,EAAOoC,GAAG,YACXZ,EAAWa,YAAa,EACxBb,EAAWc,YAAa,EACaC,SAAlCZ,EAAea,iBAChBb,EAAec,aAAaF,QAC5BvB,EAAY0B,SAASnC,KAAK,WACxBJ,EAASwC,OAAO,SAChBxC,EAASwC,OAAO,cAChBf,EAAoBgB,mBAAmBrC,KAAK,WAC1CP,EAAOF,GAAG,YAIhBE,EAAOF,GAAG,UAGZC,EAAO8C,UAAY,WACjB7B,EAAY8B,MAAM/C,EAAOoB,MACtBZ,KAAK,SAASC,GACb,GAAGA,EAASC,KAAKW,QAAS,CAExB,GAAI2B,GAAsB,GAAIC,MAC1BC,GACFC,KAAM,IAGLnD,GAAOkC,WACRc,EAAoBI,QAASJ,EAAoBK,UAAYpB,GAE7De,EAAoBI,QAASJ,EAAoBK,UAAYtB,GAG/DmB,EAAkBI,QAAUN,EAG5BpB,EAAec,aAAajC,EAASC,KAAKW,QAAQD,KAAKmC,OACvD3B,EAAe4B,UAAU/C,EAASC,KAAKW,QAAQD,KAAKqC,IAAIC,KACxDpC,EAAOD,QAAQZ,EAASC,KAAKW,QAAQE,SAErCE,EAAWc,YAAa,EACxBd,EAAWkC,SAAWlD,EAASC,KAAKW,QAAQD,KAAKwC,KACjDxD,EAASyD,IAAI,QAASpD,EAASC,KAAKW,QAAQD,KAAKmC,MAAOL,GACxD9C,EAASyD,IAAI,aAAc7D,EAAOkC,WAAa,EAAI,EAAGgB,GAEtDrB,EAAoBgB,mBAAmBrC,KAAK,WAC1CP,EAAOF,GAAG,aAKZuB,GAAOE,MAAMf,EAASC,KAAKc,MAAMD,kBAQ/C,WACE,YAEAtC,SAAQC,OAAO,gBACZC,QAAA,WAAO,SAAS2E,GACfA,EAASC,UAAU,eAAA,YAAA,YAAA,kBAAA,QAAe,SAASC,EAAW9D,EAAW+D,EAAiBC,GAIhF,MAHIA,KACFF,EAAYC,GAEPD,WAOf,WACE,YAEA/E,SAAQC,OAAO,aACZiF,QAAQ,0BAAA,QAAA,uBAAA,UAA0B,SAASxC,EAAOyC,EAAsBpC,GAEvEqC,KAAKC,gBAAkB,WACrB,MAAO3C,GAAM7B,IAAIkC,EAAU,0BAOnC,WACE,YAEA/C,SAAQC,OAAO,2BACZC,QAAA,WAAO,SAAS2E,GACfA,EAASC,UAAU,0BAAA,YAAA,YAAA,6BAAA,QAA0B,SAASC,EAAW9D,EAAWqE,EAA4BL,GAItG,MAHIA,KACFF,EAAYO,GAEPP,WAOf,WACE,YAEA/E,SAAQC,OAAO,wBACZiF,QAAQ,8BAAA,QAA8B,SAASxC,GAE9C0C,KAAKC,gBAAkB,WACrB,MAAO3C,GAAM7B,IAAI,2DAMzB,WACE,YAEAb,SAAQC,OAAO,kBACZC,QAAA,WAAO,SAAS2E,GACfA,EAASC,UAAU,oBAAA,YAAA,uBAAA,QAAoB,SAASC,EAAWQ,EAAsBN,GAI/E,MAHIA,KACFF,EAAYQ,GAEPR,WAOf,WACE,YAEA/E,SAAQC,OAAO,eACZiF,QAAQ,wBAAA,QAAA,uBAAwB,SAASxC,EAAOyC,GAE/CC,KAAKI,YAAc,WACjB,MAAO9C,GAAM7B,IAAI,2CAGnBuE,KAAKK,gBAAkB,SAASC,GAC9B,MAAOhD,GAAM7B,IAAI,4CAGnBuE,KAAKO,qBAAuB,SAASD,GACnC,MAAOhD,GAAM7B,IAAI,mDAGnBuE,KAAKQ,cAAgB,SAASF,EAAQG,EAAMC,GAC1C,MAAY,KAATD,EACMnD,EAAM7B,IAAI,4CAEV6B,EAAM7B,IAAI,6CAIrBuE,KAAKW,UAAY,SAASL,EAAQM,GAChC,MAAOtD,GAAM7B,IAAI,8CAGnBuE,KAAKa,WAAa,SAASP,EAAQjE,GACjC,MAAOiB,GAAM7B,IAAI,0CAA2CsE,EAAqB1D,KAGnF2D,KAAKc,aAAe,SAASR,EAAQjE,GACnC,MAAOiB,GAAM7B,IAAI,0CAA2CsE,EAAqB1D,KAGnF2D,KAAK9D,YAAc,SAASZ,GAC1B,MAAU,UAAPA,EACMgC,EAAM7B,IAAI,qCAEV6B,EAAM7B,IAAI,oDAO3B,WACE,YAEAb,SAAQC,OAAO,eACZiF,QAAQ,oBAAA,QAAA,uBAAA,UAAoB,SAASxC,EAAOyC,EAAsBpC,GACjE,GAAImC,GAAUE,IACdA,MAAKI,YAAc,SAASW,GAC1B,GAAIC,GAAaD,EAAS,oBAAsBA,EAAS,EACzD,OAAOzD,GAAM7B,IAAIkC,EAAU,kBAAoBqD,IAGjDhB,KAAKK,gBAAkB,SAASC,EAAQI,EAAOO,GAC7CP,EAAQA,GAAS,CACjB,IAAIQ,GAAY,EAChB,IAAGtG,QAAQuG,SAASF,GAClB,IAAI,GAAIG,KAAKH,GACXC,GAAa,SAAWE,EAAI,KAAOH,EAAKG,EAI5C,OAAO9D,GAAM7B,IAAIkC,EAAU,IAAM2C,EAAS,wCAA0CI,EAAQQ,IAG9FlB,KAAKO,qBAAuB,SAASD,GACnC,MAAOR,GAAQM,YAAYE,IAI7BN,KAAKQ,cAAgB,SAASF,EAAQG,EAAMC,EAAOW,EAAWH,EAAWI,GACvE,GAAIL,GAAUI,GAAaH,EAAa,SAAWG,EAAY,KAAOH,EAAY,GAC9EK,EAAWD,EAAiB,uBAAyBA,EAAiB,EAC1E,OAAOhE,GAAM7B,IAAIkC,EAAU,IAAM2C,EAAS,SAAWG,EAAO,wCAA0CC,EAAQO,EAAOM,IAGvHvB,KAAKW,UAAY,SAASL,EAAQM,GAChC,MAAOtD,GAAM7B,IAAIkC,EAAU,IAAM2C,EAAS,IAAMM,EAAK,MAGvDZ,KAAKa,WAAa,SAASP,EAAQjE,EAAMmF,EAAOC,GAC9C,GAAIC,GAAiC,mBAAbrF,GAAK+C,KAAuBoC,EAAQ,SAAW,QAEvE,OAAGC,GACMnE,EAAMqE,KAAKhE,EAAU,IAAM2C,EAAS,IAAMoB,EAAa,IAAKrF,GAAOuF,SACxEC,mBAAoB,iBAClBC,eAAoB3D,OACpB4D,OAAoB,sBAGjBzE,EAAMqE,KAAKhE,EAAU,IAAM2C,EAAS,IAAMoB,EAAa,IAAK3B,EAAqB1D,KAK5F2D,KAAKc,aAAe,SAASR,EAAQjE,GACnC,MAAOiB,GAAMqE,KAAKhE,EAAU,IAAM2C,EAAS,WAAYP,EAAqB1D,KAG9E2D,KAAKgC,aAAe,SAAS1B,EAAQjE,EAAMgF,EAAWH,GACpD,GAAIF,KAEJ,IAAG3E,EAAK4F,OACN,IAAI,GAAIb,GAAI,EAAGA,EAAI/E,EAAK4F,OAAQb,IAC9BJ,EAAWkB,KAAKtH,QAAQuH,QAAQ,4DAA8D9F,EAAK+E,GAAK,MAK5G,IAAIgB,GAAOxH,QAAQuH,QAAQ,gBAC3BC,GAAKC,KAAK,GACV,IAAI3B,GAAQ9F,QAAQuH,QAAQ,gDACxBlB,EAAUI,GAAaH,EAAatG,QAAQuH,QAAQ,mCAAqCd,EAAY,aAAeH,EAAY,MAAQ,EAC5IoB,MAAKtB,GAAYuB,KAAK,SAASC,GAC7BJ,EAAKK,OAAOD,KAEdJ,EAAKK,OAAO/B,GACZ0B,EAAKK,OAAOxB,GACZmB,EAAKM,MACHC,OAAQ,IAAMrC,EAAS,aACtB,GAAGsC,UAGR5C,KAAK6C,kBAAoB,SAASvC,EAAQjE,GACxC,GAAIyG,MACAC,IACJ,IAAG1G,EAAK4F,OAAQ,CACd,GAAIb,GAAG4B,CACP,KAAI5B,EAAI,EAAG4B,EAAI,EAAG5B,EAAI/E,EAAK4F,OAAQb,IAAK4B,IAClC3G,EAAK+E,IACP0B,EAAUZ,KAAK,yBAA2B7F,EAAK+E,GAAG/B,KAE5C,IAAL2D,GAAW5B,GAAK/E,EAAK4F,OAAO,IAC7Ba,EAAYA,EAAUG,KAAK,KAC3BF,EAAQb,KAAK5E,EAAM7B,IAAIkC,EAAU,IAAM2C,EAAS,KAAOwC,EAAY,aACnEE,EAAI,GACJF,MAKN,MAAOC,IAGT/C,KAAK9D,YAAc,SAASZ,GAC1B,MAAOgC,GAAM7B,IAAIkC,EAAU,iCAAmCrC,UAMtE,WACE,YAEAV,SAAQC,OAAO,aACZiF,QAAQ,mBAAA,QAAmB,SAASxC,GACnC0C,KAAK1B,OAAS,WACZ,MAAOhB,GAAM7B,IAAI,+CAGnBuE,KAAKtB,MAAQ,SAASwE,GAEpB,GAAIC,GAA0C,IAAlCD,EAAQpF,MAAMsF,QAAQ,QAC9B,YACA,gBAGJ,OAAO9F,GAAM7B,IAAI,0BAA4B0H,IAG/CnD,KAAKlD,SAAW,SAASoG,GAEvB,GAAIC,GAA0C,IAAlCD,EAAQpF,MAAMsF,QAAQ,QAC5B,gBACA,oBAGN,OAAO9F,GAAM7B,IAAI,0BAA4B0H,UAMrD,WACE,YAEAvI,SAAQC,OAAO,aACZiF,QAAQ,eAAA,QAAA,uBAAA,UAAe,SAASxC,EAAOyC,EAAsBpC,GAC5DqC,KAAK1B,OAAS,WACZ,MAAOhB,GAAM7B,IAAIkC,EAAU,kBAG7BqC,KAAKtB,MAAQ,SAASwE,GACpB,MAAO5F,GAAMqE,KAAKhE,EAAU,mBAAoBoC,EAAqBmD,KAGvElD,KAAKlD,SAAW,SAASoG,GACvB,MAAO5F,GAAMqE,KAAKhE,EAAU,uBAAwBoC,EAAqBmD,KAI3ElD,KAAKqD,WAAa,WAChB,MAAO/F,GAAM7B,IAAIkC,EAAU,4BAOnC,WACE,YAEA/C,SACGC,OAAO,QACPQ,WAAW,gBAAA,SAAgB,SAASM,GAEnCA,EAAOY,YAAc,kBAK3B,WACE,YAEA3B,SAAQC,OAAO,gBACZC,QAAA,iBAAO,SAASC,GAEfA,EACGE,MAAM,YACLC,OACEC,YACEC,YAAc,iCACdC,WAAY,oBAMpBN,EACGE,MAAM,YACLC,OACEC,YACEC,YAAc,iCACdC,WAAY,0BAS1B,WACE,YAEAT,SAAQC,OAAO,aACZQ,WAAW,iBAAA,SAAA,aAAiB,SAASM,EAAQyB,UAKlD,WACE,YAEAxC,SACGC,OAAO,QACPQ,WAAW,YAAA,SAAY,SAASM,GAE/BA,EAAOgB,IAAM,aAKnB,WACE,YAEA/B,SAAQC,OAAO,kCAIjB,WACE,YAEAD,SAAQC,OAAO,4BACZyI,UAAU,gBAAiB,WAE1B,OACEC,SAAa,IACbC,OACEC,OAAW,IACXC,UAAW,IACXC,MAAW,IACXC,aAAc,KAEhBxI,YAAa,kDACbyI,KAAM,SAASlI,EAAQmI,EAAUC,GAC/B,GAA0B,WAAvBpI,EAAO8H,OAAOO,KAAmB,CAClC,GAIIC,IAJe3B,KAAK3G,EAAOiI,aAAavH,KAAKA,MAAM6H,KAAK,SAAUC,GACpE,MAAO7B,MAAK3G,EAAOgI,OAAOS,WAAW/E,IAAK8E,EAAK/E,IAAIC,QAGjCiD,KAAK3G,EAAOgI,OAC7BU,IAAI,SAASC,GACZ,MAAOhC,MAAK3G,EAAOiI,aAAavH,KAAKA,MAAM6H,KAAK,SAASK,GACvD,MAAOA,GAAWnF,IAAIC,MAAQiF,EAAUjF,MACvCmF,QAEJC,UACAC,UAEH/I,GAAOgJ,WAAaV,EAAchB,KAAK,UAEvCtH,GAAOgJ,WAAahJ,EAAOgI,aASvC,WACE,YAEA/I,SAAQC,OAAO,oCAIjB,WACE,YAEAD,SAAQC,OAAO,8BACZyI,UAAU,kBAAmB,WAE5B,OACEC,SAAa,IACbC,OACEC,OAAW,IACXC,UAAW,IACXC,MAAW,KAEbvI,YAAa,4DAOrB,WACE,YAEAR,SAAQC,OAAO,sCAIjB,WACE,YAEAD,SAAQC,OAAO,gCACZyI,UAAU,oBAAqB,WAE9B,OACEC,SAAa,IACbC,OACEC,OAAW,IACXC,UAAW,IACXC,MAAW,KAEbvI,YAAa,gEAOrB,WACE,YAEAR,SAAQC,OAAO,oCAIjB,WACE,YAEAD,SAAQC,OAAO,8BACZyI,UAAU,kBAAmB,WAE5B,OACEC,SAAa,IACbC,OACEC,OAAW,IACXC,UAAW,IACXC,MAAW,IACXC,aAAc,IACdgB,YAAa,KAEfxJ,YAAa,sDACbyI,KAAM,SAASlI,GAEbA,EAAOiJ,YAAYjJ,EAAO+H,WAAa/H,EAAOiJ,YAAYjJ,EAAO+H,cAEjE,IAAImB,GAAOvC,KAAK3G,EAAOiI,aAAavH,KAAKA,MAAMgI,IAAI,SAASF,GAC1D,OACEK,MAAOL,EAAKK,MACZ5D,GAAIuD,EAAK/E,IAAIC,OAEdqF,SAGH/I,GAAOiJ,YAAYjJ,EAAO+H,WAAapB,KAAK3G,EAAOgI,OAAOU,IAAI,SAASC,GACnE,MAAOhC,MAAKuC,GAAMX,KAAK,SAASY,GAC9B,MAAOA,GAAWlE,KAChB0D,EAAUjF,QAGfoF,UACAC,UAEH/I,EAAOkJ,KAAOA,SAQxB,WACE,YAEAjK,SAAQC,OAAO,yBACZkK,MAAM,iBAGX,WACE,YAEAnK,SAAQC,OAAO,sBACZiF,QAAQ,kBAAA,WAAA,UAAkB,SAAwB/D,EAAUiJ,GAE3DhF,KAAKiF,UAAY,WACf,MAAOlJ,GAASN,IAAI,WAGtBuE,KAAKb,UAAY,SAAS+F,GACxB,GAAIC,GAAa,GAAIvG,KAErB,OADAuG,GAAWpG,QAAQoG,EAAWnG,UAAY,OACnCjD,EAASyD,IAAI,SAAU0F,GAAUjG,QAASkG,KAGnDnF,KAAK3B,aAAe,SAAS+G,GAE3B,GAAID,GAAa,GAAIvG,KAErB,OADAuG,GAAWpG,QAAQoG,EAAWnG,UAAY,OACnCjD,EAASyD,IAAI,YAAa4F,GAAanG,QAASkG,KAGzDnF,KAAK5B,aAAe,WAClB,MAAOrC,GAASN,IAAI,oBAM5B,WACE,YAEAb,SAAQC,OAAO,qCAIjB,WACE,YAEAD,SAAQC,OAAO,+BACZyI,UAAU,mBAAoB,WAE7B,OACEC,SAAa,IACbC,OACEC,OAAW,IACXC,UAAW,IACXC,MAAW,KAEbvI,YAAa,8DAOrB,WACE,YAEAR,SAAQC,OAAO,iCAGjB,WACE,YAEAD,SAAQC,OAAO,2BACZiF,QAAQ,uBAAA,KAAA,yBAAuB,SAA6BuF,EAAIC,GA+B/D,QAASC,KACP,MAAG3K,SAAQ4K,UAAU1F,EAAQ2F,gBACpBJ,EAAGK,KAAK5F,EAAQ2F,gBAEhBH,EAAuBrF,kBAAkB9D,KAAK,SAASC,GAE5D,MADA0D,GAAQ2F,eAAiBrJ,EAASC,KAC3ByD,EAAQ2F,iBAnCrB,GAAI3F,GAAUE,IAEdA,MAAK2F,eAAiB,SAAS1K,GAC7B,MAAOsK,KAAoBpJ,KAAK,SAASsJ,GACvC,GAAIG,GAAa3K,EAAM4K,MAAM,IAE7B,IAAyB,IAAtBD,EAAW3D,OACZ,OAAO,CAGT,IAAI3B,GAASsF,EAAW,GACpBjD,EAASiD,EAAW,EACxB,OAAGtF,IACEmF,EAAenF,GACT1F,QAAQ4K,UAAUC,EAAenF,GAAQwF,OAAOxF,EAAS,IAAMqC,KAGnE,KAIX3C,KAAKxB,iBAAmB,WACtB,MAAO8G,GAAuBrF,kBAAkB9D,KAAK,SAASC,GAE5D,MADA0D,GAAQ2F,eAAiBrJ,EAASC,KAC3ByD,EAAQ2F,wBAmBzB,WACE,YAEA7K,SAAQC,OAAO,uBAAwB,iBAIzC,WACE,YAEAD,SAAQC,OAAO,uBACZyI,UAAU,YAAA,WAAA,UAAY,SAASvH,EAAUgK,GAExC,OACExC,SAAa,IACbnI,YAAa,wCACbyI,KAAM,SAASlI,EAAQmI,EAAUC,GAa/B,QAASiC,KACW,MAAfrK,EAAOsK,KACRtK,EAAOuK,cAAgB,UAEvBvK,EAAOuK,cAAgB,UAhB3BvK,EAAOsK,KAAOlK,EAASN,IAAI,cAAgB,KAC3CuK,IAEArK,EAAOwK,aAAe,SAASlK,GAC1BN,EAAOsK,OAAShK,IACjBN,EAAOsK,KAAOhK,EACdF,EAASyD,IAAI,YAAavD,GAC1B+J,IACAD,EAAQK,SAASC,mBAmB/B,WACE,YAEAzL,SAAQC,OAAO,wBACZC,QAAA,WAAO,SAAS2E,GACfA,EAASC,UAAU,iBAAA,YAAA,oBAAA,QAAiB,SAASC,EAAW2G,EAAmBzG,GAIzE,MAHIA,KACFF,EAAY2G,GAEP3G,WAOf,WACE,YAEA/E,SAAQC,OAAO,qBACZiF,QAAQ,qBAAA,QAAA,uBAAqB,SAASxC,EAAOyC,UAMlD,WACE,YAEAnF,SAAQC,OAAO,qBACZiF,QAAQ,iBAAA,KAAA,mBAAiB,SAASuF,EAAIvJ,GACrC,GAAIgE,GAAUE,IAEdF,GAAQ+C,kBAAoB,SAASY,GACnC,GAAI8C,GAAWjE,KAAKmB,GACjBY,IAAI,SAASF,GACZ,MAAiB,WAAdA,EAAKH,KACClI,EAAiBuE,gBAAgB8D,EAAK7D,OAAOkG,MAAO,EAAG,GAAGrK,KAAK,SAASC,GAC7E,OACEkE,OAAQ6D,EAAK7D,OAAOkG,MACpBnK,KAAMD,EAASC,QAJrB,SASDoI,UACAC,SAEH,OAAOW,GAAGoB,IAAIF,UAMtB,WACE,YAEA3L,SAAQC,OAAO,OACb,YACA,eACA,YACA,UACA,YACA,aACA,yBACA,wBAEA,qBACA,0BACA,sBACA,oBAEA,2BACA,6BACA,+BACA,8BACA,6BAEA,YACA,uBACA,cAEA,OACA,gBACA,OACA,iBAGJ,WACE,YAEAD,SAAQC,OAAO,OACZ6L,KAAA,aAAA,SAAA,QAAA,iBAAA,sBAAI,SAAStJ,EAAYxB,EAAQ0B,EAAOC,EAAgBC,GAEvD,GAAImJ,GAAYpJ,EAAea,cAE5BuI,KACDvJ,EAAWc,YAAa,GAG1Bd,EAAWwJ,IAAI,sBAAuB,SAASC,EAAOC,EAAIC,EAAUC,GAElE5J,EAAW6J,WAAaH,EAAGvH,KAC3BnC,EAAW8J,aAA2B,cAAZJ,EAAGvH,KAAuB,OAASwH,EAASzG,OAEtD,YAAb0G,EAAKzH,OACNnC,EAAW6J,WAAaH,EAAGvH,KAC3BnC,EAAW8J,aAAeH,EAASzG,OACnClD,EAAWa,YAAa,GAG1BT,EAAoBmI,eAAemB,EAAGvH,MAAMpD,KAAK,SAASgL,GACpDA,GAAavL,EAAOF,GAAG,QAG7B,IAAI0L,IAAa,QAAS,UACxBT,EAAYpJ,EAAea,gBAexBkE,KAAK8E,GAAUC,SAASP,EAAGvH,QAAUoH,EAItCA,GAAyB,UAAZG,EAAGvH,MAClB3D,EAAOF,GAAG,eAMpB,WACE,YAEAd,SACGC,OAAO,OACPyM,SAAS,SAAUrK,QACnBqK,SAAS,UAAW,IACpBA,SAAS,SAAS,GAClBA,SAAS,cAAA,SAGd,WACE,YAEA1M,SAAQC,OAAO,OAEZC,QAAA,iBAAA,qBAAO,SAASC,EAAgBC,GAC/BD,EACGE,MAAM,OACLK,IAAY,MAIhBN,EAAmBO,UAAU,SAASC,GACpCA,EAAUC,IAAI,UAAUC,GAAG,sBAI9BZ,QAAA,qBAAA,UAAA,QAAO,SAASyM,EAAoB5J,EAASkC,GAC5C,GAAI9D,EACJnB,SAAQ4M,UAAU,cAAcC,QAAQ,WAAY,SAASC,GAC3D3L,EAAW2L,IAGb,IAAIzB,GAAOlK,EAASN,IAAI,cAAgB,IACrCoE,KAAUA,EACX0H,EAAmBI,aAAa,uCAAyC1B,EAAO,SAEhFsB,EAAmBI,aAAahK,EAAU,kBAAoBsI,GAEhEsB,EAAmBK,kBAAkB3B,MAGtCnL,QAAA,oBAAO,SAAS+M,GAEfA,EAAkBC,WAAU,MAG7BhN,QAAA,eAAA,gBAAA,iBAAA,SAAO,SAASiN,EAAcC,EAAejN,EAAgBkC,GAE5D+K,EAAcC,SAASrG,QAAQD,MAAQI,OAAU,mBAAoBD,eAAgB,qCACrFkG,EAAcC,SAASrG,QAAQnG,KAAOsG,OAAU,oBAEhDiG,EAAcE,aAAahG,MAAA,KAAA,YAAA,cAAK,SAASmD,EAAI7J,EAAWkC,GACtD,OACEwF,QAAS,SAASpI,GAChB,GAAIqN,GAAW3M,EAAUC,IAAI,YAAYA,IAAI,cACzCyD,EAAQ1D,EAAUC,IAAI,YAAYA,IAAI,SACtC2M,EAAW5M,EAAUC,IAAI,YAAYA,IAAI,WAE7C,IAAGyD,GAAsB,MAAbiJ,EAAkB,CAC5B,GAAIxJ,GAAsB,GAAIC,KAC9BD,GAAoBI,QAASJ,EAAoBK,UAAYtB,EAC7D,IAAImB,IACFI,QAASN,EACTG,KAAM,IAERtD,GAAUC,IAAI,YAAY+D,IAAI,QAASN,EAAOL,GAC9CrD,EAAUC,IAAI,YAAY+D,IAAI,aAAcN,EAAOL,GACnDrD,EAAUC,IAAI,YAAY+D,IAAI,WAAY4I,EAAUvJ,GAGtD,MAAO/D,IAETuN,cAAgB,SAASC,GAoBvB,MAnBuB,MAApBA,EAAUC,SACX/M,EAAUC,IAAI,cAAc+M,aAAeF,EAAUjM,KAAKc,MAAMD,QAChE1B,EAAUC,IAAI,UAAUC,GAAG,aAEN,KAApB4M,EAAUC,OACX/M,EAAUC,IAAI,UAAUC,GAAG,UACC,KAApB4M,EAAUC,OACfD,EAAUjM,KAAKc,MAAMD,SACtBD,EAAOE,MAAMmL,EAAUjM,KAAKc,MAAMD,SACR,KAApBoL,EAAUC,OAClB/M,EAAUC,IAAI,cAAc+M,aAAeF,EAAUjM,KAAKc,MAAMD,QAGhEoF,KAAKgG,EAAUjM,KAAKc,MAAfmL,SAA2B/F,KAAK,SAASpF,GACzCA,EAAMD,SACPD,EAAOE,MAAMA,EAAMD,WAIlBmI,EAAGoD,OAAOH,WAOxBxN,QAAA,SAAO,SAASmC,GACfA,EAAOyL,QAAQC,QAAU,IACzB1L,EAAOyL,QAAQE,cAAgB,kBAC/B3L,EAAOyL,QAAQG,mBAAoB,EACnC5L,EAAOyL,QAAQI,aAAc,QAGnClO,QAAQC,OAAO,OAAO6L,KAAK,iBAAkB,SAASqC,GAAiBA,EAAevJ,IAAI,wCAAwC,+dAClIuJ,EAAevJ,IAAI,wDAAwD,kGAC3EuJ,EAAevJ,IAAI,sDAAsD,yTACzEuJ,EAAevJ,IAAI,0DAA0D,+GAC7EuJ,EAAevJ,IAAI,sDAAsD,2GACzEuJ,EAAevJ,IAAI,kDAAkD,oBACrEuJ,EAAevJ,IAAI,6BAA6B,qOAChDuJ,EAAevJ,IAAI,iCAAiC,ubACpDuJ,EAAevJ,IAAI,iCAAiC,0bACpDuJ,EAAevJ,IAAI,6BAA6B,0DAChDuJ,EAAevJ,IAAI,sDAAsD,6lCACzEuJ,EAAevJ,IAAI,qDAAqD,+7BACxEuJ,EAAevJ,IAAI,sCAAsC","file":"themes/frontend/scripts/app-44b56e38fe.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular\n    .module('page', [])\n    .config(function($stateProvider, $urlRouterProvider) {\n\n      $stateProvider\n        .state('customHandler', {\n          views: {\n            'content@': {\n              templateUrl: 'app/modules/page/page.html',\n              controller: 'CustomPageCtrl'\n            }\n          }\n        });\n\n      $stateProvider\n        .state('page', {\n          url:  '/page',\n          views: {\n            'content@': {\n              templateUrl: 'app/modules/page/page.html',\n              controller: 'TestPageCtrl'\n            }\n          }\n        });\n\n      $urlRouterProvider.otherwise(function($injector) {\n        $injector.get('$state').go('customHandler');\n      });\n\n    });\n\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('page')\n    .controller('CustomPageCtrl', function($scope, $state, $location, EntityAPIService, $cookies) {\n\n      var url = $location.url();\n      var locale = $cookies.get('curLocale') || 'ru';\n\n      EntityAPIService.getTextPage(url).then(function(response) {\n        if(response.data.total > 0) {\n          if(locale === 'en') {\n            $scope.pageContent = response.data.data[0].en_content;\n          } else {\n            $scope.pageContent = response.data.data[0].content;\n          }\n        } else {\n          pageNotFound();\n        }\n      });\n\n      function pageNotFound() {\n        if($state.get('error404') !== null) {\n          $state.go('error404');\n        } else {\n          $state.go('app');\n        }\n      }\n\n    });\n\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('demo', [])\n    .config(function($stateProvider) {\n\n      $stateProvider\n        .state('app.demo', {\n          url:        'demo'\n          , abstract: true\n        })\n      ;\n\n      $stateProvider\n        .state('app.demo.index', {\n          url: ''\n          , views: {\n            'content@': {\n              templateUrl:  'app/modules/demo/demo.html'\n              , controller: 'DemoCtrl'\n            }\n          }\n        })\n        .state('app.demo.read', {\n          url: '/:id'\n          , views: {\n            'content@': {\n              templateUrl:  'app/modules/demo/read/demoRead.html'\n              , controller: 'DemoReadCtrl'\n            }\n          }\n        })\n      ;\n    });\n\n})();\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('demo')\r\n    .controller('DemoReadCtrl', function($scope) {\r\n\r\n      $scope.foo = 'test'\r\n\r\n    });\r\n\r\n})();\n(function() {\n'use strict';\n\n  angular.module('authorization', [])\n    .config(function($stateProvider) {\n\n//TODO: Refactor!\n      $stateProvider\n        .state('login', {\n          url: '/login',\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/authorization/signin/authorization.html',\n              controller: 'AuthorizationCtrl'\n            }\n          }\n        })\n        .state('logout', {\n          url: '/logout',\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/authorization/signin/authorization.html',\n              controller: 'AuthorizationCtrl'\n            }\n          }\n        })\n        .state('register', {\n          url: '/signup',\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/authorization/signup/registration.html',\n              controller: 'RegistrationCtrl'\n            }\n          }\n        })\n        ;\n    })\n    ;\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('authorization')\n    .controller('RegistrationCtrl', function($scope, $state, AuthService) {\n\n      $scope.makeRegistration = function() {\n        AuthService.register($scope.user).then(function(response) {\n\n          if(response.data.success) {\n            toastr.success(response.data.success.message);\n            $state.go('login');\n          } else {\n            toastr.error(response.data.error.message);\n          }\n        });\n      };\n\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('authorization')\n    .controller('AuthorizationCtrl', function($scope, $rootScope, $state, $document, $http, $cookies, AuthService, toastr, SessionService, RestrictionsService, $stateParams, loginPeriod, baseURL) {\n\n      var yearFuther = 1000*60*60*24*365;\n      $scope.rememberMe = true;\n\n      //TODO: FOr development\n      $scope.user = {\n        email: 'kamal@hismith.ru',\n        password: 'multipass'\n      }\n\n      if($state.is('logout')) {\n        $rootScope.hidePanels = true;\n        $rootScope.authorized = false;\n        if(SessionService.getSessionID() !== undefined) {\n          SessionService.setSessionID(undefined);\n          AuthService.logout().then(function() {\n            $cookies.remove('token');\n            $cookies.remove('rememberMe');\n            RestrictionsService.resetPermissions().then(function() {\n              $state.go('app');\n            });\n          });\n        }\n        $state.go('login');\n      }\n\n      $scope.makeLogin = function() {\n        AuthService.login($scope.user)\n          .then(function(response) {\n            if(response.data.success) {\n\n              var loginExpirationDate = new Date();\n              var tokenCookieParams = {\n                path: '/'\n              };\n\n              if($scope.rememberMe) {\n                loginExpirationDate.setTime( loginExpirationDate.getTime() + yearFuther );\n              }else{\n                loginExpirationDate.setTime( loginExpirationDate.getTime() + loginPeriod );\n              }\n\n              tokenCookieParams.expires = loginExpirationDate;\n\n\n              SessionService.setSessionID(response.data.success.user.token);\n              SessionService.setUserID(response.data.success.user._id.$id);\n              toastr.success(response.data.success.message);\n\n              $rootScope.authorized = true;\n              $rootScope.userName = response.data.success.user.name;\n              $cookies.put('token', response.data.success.user.token, tokenCookieParams);\n              $cookies.put('rememberMe', $scope.rememberMe ? 1 : 0, tokenCookieParams);\n\n              RestrictionsService.resetPermissions().then(function() {\n                $state.go('app');\n              });\n\n\n            } else {\n              toastr.error(response.data.error.message);\n            }\n          })\n\n      };\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.auth', [])\n    .config(function($provide) {\n      $provide.decorator('AuthService', function($delegate, $location, AuthServiceMock, debug) {\n        if (debug) {\n          $delegate = AuthServiceMock;\n        }\n        return $delegate;\n      });\n    })\n  ;\n\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('rest.auth')\r\n    .service('RestrictionsAPIService', function($http, $httpParamSerializer, baseURL) {\r\n\r\n      this.getRestrictions = function() {\r\n        return $http.get(baseURL + '/atom/entities/');\r\n      };\r\n\r\n    });\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('rest.restrictionsAPI', [])\r\n    .config(function($provide) {\r\n      $provide.decorator('RestrictionsAPIService', function($delegate, $location, RestrictionsAPIServiceMock, debug) {\r\n        if (debug) {\r\n          $delegate = RestrictionsAPIServiceMock;\r\n        }\r\n        return $delegate;\r\n      });\r\n    })\r\n  ;\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('rest.restrictionsAPI')\r\n    .service('RestrictionsAPIServiceMock', function($http) {\r\n\r\n      this.getRestrictions = function() {\r\n        return $http.get('/app/rest/restrictions/fixture/restrictions.json');\r\n      };\r\n\r\n    });\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular.module('rest.entity', [])\n    .config(function($provide) {\n      $provide.decorator('EntityAPIService', function($delegate, EntityAPIServiceMock, debug) {\n        if (debug) {\n          $delegate = EntityAPIServiceMock;\n        }\n        return $delegate;\n      });\n    })\n  ;\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.entity')\n    .service('EntityAPIServiceMock', function($http, $httpParamSerializer) {\n\n      this.getEntities = function() {\n        return $http.get('/app/rest/entity/fixture/entities.json');\n      };\n\n      this.getEntitiesList = function(entity) {\n        return $http.get('/app/rest/entity/fixture/usersList.json');\n      };\n\n      this.getEntityDescription = function(entity) {\n        return $http.get('/app/rest/entity/fixture/usersDescription.json');\n      };\n\n      this.getEntityPage = function(entity, page, limit) {\n        if(page === 0) {\n          return $http.get('/app/rest/entity/fixture/usersPage1.json');\n        } else {\n          return $http.get('/app/rest/entity/fixture/usersPage2.json');\n        }\n      };\n\n      this.getEntity = function(entity, id) {\n        return $http.get('/app/rest/entity/fixture/userExample.json');\n      };\n\n      this.saveEntity = function(entity, data) {\n        return $http.get('/app/rest/entity/fixture/userSaved.json', $httpParamSerializer(data));\n      };\n\n      this.removeEntity = function(entity, data) {\n        return $http.get('/app/rest/entity/fixture/userSaved.json', $httpParamSerializer(data));\n      };\n\n      this.getTextPage = function(url) {\n        if(url == '/page1') {\n          return $http.get('app/rest/entity/fixture/page.json');\n        } else {\n          return $http.get('app/rest/entity/fixture/pageNotFound.json');\n        }\n      }\n\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.entity')\n    .service('EntityAPIService', function($http, $httpParamSerializer, baseURL) {\n      var service = this;\n      this.getEntities = function(filter) {\n        var conditions = filter ? '?condition[name]=' + filter : '';\n        return $http.get(baseURL + '/atom/entities/' + conditions);\n      };\n\n      this.getEntitiesList = function(entity, limit, sort) {\n        limit = limit || 0;\n        var sortOrder = '';\n        if(angular.isObject(sort)) {\n          for(var i in sort) {\n            sortOrder += '&sort[' + i + ']=' + sort[i];\n          }\n        }\n\n        return $http.get(baseURL + '/' + entity + \"/?condition[enabled][$ne]=null&limit=\" + limit + sortOrder);\n      };\n\n      this.getEntityDescription = function(entity) {\n        return service.getEntities(entity);\n        //return $http.get(baseURL + '/atom/entities/' + entity + '/');\n      };\n\n      this.getEntityPage = function(entity, page, limit, sortField, sortOrder, searchKeywords) {\n        var sort = !!(sortField && sortOrder) ? '&sort[' + sortField + ']=' + sortOrder : '';\n        var search = !!searchKeywords ? '&condition[$search]=' + searchKeywords : '';\n        return $http.get(baseURL + '/' + entity + '/page/' + page + '/?condition[enabled][$ne]=null&limit=' + limit + sort + search);\n      };\n\n      this.getEntity = function(entity, id) {\n        return $http.get(baseURL + '/' + entity + '/' + id + '/');\n      };\n\n      this.saveEntity = function(entity, data, isNew, hasFileField) {\n        var saveMethod = typeof data._id === 'undefined' && isNew ? 'create' : 'update';\n\n        if(hasFileField){\n          return $http.post(baseURL + '/' + entity + '/' + saveMethod + '/', data, {headers: {\n            'X-Requested-With': 'XMLHttpRequest'\n            , 'Content-Type':     undefined\n            , 'Accept':           'application/json'\n          }} );\n        } else {\n          return $http.post(baseURL + '/' + entity + '/' + saveMethod + '/', $httpParamSerializer(data));\n        }\n\n      };\n\n      this.removeEntity = function(entity, data) {\n        return $http.post(baseURL + '/' + entity + '/delete/', $httpParamSerializer(data));\n      };\n\n      this.exportEntity = function(entity, data, sortField, sortOrder) {\n        var conditions = [];\n        //var condition = 'condition[_id][$in][]=561fe8ae572b94d3358b4567&condition[_id][$in][]=5613e72e572b94274d8b4567&condition[_id][$in][]=5613e6e3572b94114d8b4567';\n        if(data.length) {\n          for(var i = 0; i < data.length; i++) {\n            conditions.push(angular.element('<input type=\"hidden\" name=\"condition[_id][$in][]\" value=\"' + data[i] + '\">'));\n          }\n        }\n\n\n        var form = angular.element('#downloadForm');\n        form.html('');\n        var limit = angular.element('<input type=\"hidden\" name=\"limit\" value=\"0\">');\n        var sort = !!(sortField && sortOrder) ? angular.element('<input type=\"hidden\" name=\"sort[' + sortField + ']\" value=\"' + sortOrder + '\">') : '';\n        Lazy(conditions).each(function(cond) {\n          form.append(cond);\n        });\n        form.append(limit);\n        form.append(sort);\n        form.attr({\n          action: '/' + entity + '/export/'\n        })[0].submit();\n      };\n\n      this.getLinkedEntities = function(entity, data) {\n        var condition = [];\n        var queries = [];\n        if(data.length) {\n          var i, j;\n          for(i = 0, j = 0; i < data.length; i++, j++) {\n            if (data[i]) {\n              condition.push('condition[_id][$in][]=' + data[i].$id);\n            }\n            if(j == 19 || i == data.length-1) {\n              condition = condition.join('&');\n              queries.push($http.get(baseURL + '/' + entity + '/?' + condition + '&limit=0'));\n              j = -1;\n              condition = [];\n            }\n          }\n        }\n\n        return queries;\n      };\n\n      this.getTextPage = function(url) {\n        return $http.get(baseURL + '/page/?limit=0&condition[url]=' + url);\n      }\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.auth')\n    .service('AuthServiceMock', function($http) {\n      this.logout = function() {\n        return $http.get('/app/rest/auth/fixture/logout_success.json');\n      };\n\n      this.login = function(request) {\n\n        var file = (request.email.indexOf('test') === 0)\n          ? 'auth.json'\n          : 'auth_fail.json'\n          ;\n\n        return $http.get('/app/rest/auth/fixture/' + file);\n      };\n\n      this.register = function(request) {\n\n        var file = (request.email.indexOf('test') === 0)\n            ? 'register.json'\n            : 'register_fail.json'\n          ;\n\n        return $http.get('/app/rest/auth/fixture/' + file);\n      };\n\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.auth')\n    .service('AuthService', function($http, $httpParamSerializer, baseURL) {\n      this.logout = function() {\n        return $http.get(baseURL + '/user/logout/');\n      };\n\n      this.login = function(request) {\n        return $http.post(baseURL + '/user/auth/pass/', $httpParamSerializer(request));\n      };\n\n      this.register = function(request) {\n        return $http.post(baseURL + '/user/auth/register/', $httpParamSerializer(request));\n      };\n\n\n      this.properties = function() {\n        return $http.get(baseURL + '/atom/properties/');\n      };\n\n    });\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('page')\n    .controller('TestPageCtrl', function($scope) {\n\n      $scope.pageContent = 'test page'\n\n    });\n\n})();\n(function() {\n  'use strict';\n\n  angular.module('errorPage', [ ])\n    .config(function($stateProvider) {\n\n      $stateProvider\n        .state('error500', {\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/errorPage/500.html',\n              controller: 'ErrorPageCtrl'\n            }\n          }\n        })\n      ;\n\n      $stateProvider\n        .state('error404', {\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/errorPage/404.html',\n              controller: 'ErrorPageCtrl'\n            }\n          }\n        })\n      ;\n    })\n  ;\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('errorPage')\n    .controller('ErrorPageCtrl', function($scope, $rootScope) {\n\n    });\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('demo')\n    .controller('DemoCtrl', function($scope) {\n\n      $scope.foo = 'test'\n\n    });\n\n})();\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomListField', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomListField')\r\n    .directive('atomListField', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '=',\r\n          linkedEntity: '='\r\n        },\r\n        templateUrl: 'app/directives/atomListField/atomListField.html',\r\n        link: function($scope, $element, attrs) {\r\n          if($scope.scheme.type === 'entity') {\r\n            var linkedEntity = Lazy($scope.linkedEntity.data.data).find(function (item) {\r\n              return Lazy($scope.field).findWhere({$id: item._id.$id});\r\n            });\r\n\r\n            var foundEntities = Lazy($scope.field)\r\n              .map(function(fieldItem) {\r\n                return Lazy($scope.linkedEntity.data.data).find(function(linkedItem) {\r\n                  return linkedItem._id.$id === fieldItem.$id;\r\n                }).title;\r\n              })\r\n              .compact()\r\n              .toArray();\r\n\r\n            $scope.fieldLabel = foundEntities.join(', ');\r\n          }else{\r\n            $scope.fieldLabel = $scope.field;\r\n          }\r\n        }\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldString', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldString')\r\n    .directive('atomFieldString', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '='\r\n        },\r\n        templateUrl: 'app/directives/atomFieldString/atomFieldString.html',\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldPassword', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldPassword')\r\n    .directive('atomFieldPassword', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '='\r\n        },\r\n        templateUrl: 'app/directives/atomFieldPassword/atomFieldPassword.html',\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldEntity', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldEntity')\r\n    .directive('atomFieldEntity', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '=',\r\n          linkedEntity: '=',\r\n          entityModel: '='\r\n        },\r\n        templateUrl: 'app/directives/atomFieldEntity/atomFieldEntity.html',\r\n        link: function($scope) {\r\n\r\n          $scope.entityModel[$scope.fieldName] = $scope.entityModel[$scope.fieldName] || [];\r\n\r\n          var list = Lazy($scope.linkedEntity.data.data).map(function(item) {\r\n            return {\r\n              title: item.title,\r\n              id: item._id.$id\r\n            }\r\n          }).toArray();\r\n\r\n\r\n          $scope.entityModel[$scope.fieldName] = Lazy($scope.field).map(function(fieldItem) {\r\n              return Lazy(list).find(function(entityItem) {\r\n                return entityItem.id ===\r\n                  fieldItem.$id;\r\n              })\r\n            })\r\n            .compact()\r\n            .toArray();\r\n\r\n          $scope.list = list;\r\n        }\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\n  'use strict';\n\n  angular.module('components.session', [])\n    .value('Session', {});\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('components.session')\n    .service('SessionService', function SessionService($cookies, Session) {\n\n      this.getUserID = function() {\n        return $cookies.get('userId');\n      };\n\n      this.setUserID = function(userId) {\n        var expireDate = new Date();\n        expireDate.setTime(expireDate.getTime() + 3*60*60*1000);\n        return $cookies.put('userId', userId, { expires: expireDate });\n      };\n\n      this.setSessionID = function(sessionId) {\n        //TODO: Remove storage in cookies for prod\n        var expireDate = new Date();\n        expireDate.setTime(expireDate.getTime() + 3*60*60*1000);\n        return $cookies.put('sessionId', sessionId, { expires: expireDate });\n      };\n\n      this.getSessionID = function() {\n        return $cookies.get('sessionId');\n      };\n\n    });\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldBoolean', []);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('directives.atomFieldBoolean')\r\n    .directive('atomFieldBoolean', function() {\r\n\r\n      return {\r\n        restrict:    'A',\r\n        scope: {\r\n          scheme:    '=',\r\n          fieldName: '=',\r\n          field:     '='\r\n        },\r\n        templateUrl: 'app/directives/atomFieldBoolean/atomFieldBoolean.html',\r\n      };\r\n    });\r\n\r\n})();\r\n\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.restrictions', [])\r\n\r\n})();\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.restrictions')\r\n    .service('RestrictionsService', function RestrictionsService($q, RestrictionsAPIService) {\r\n\r\n      var service = this;\r\n\r\n      this.hasPermissions = function(state) {\r\n        return getPermissionsMap().then(function(permissionsMap) {\r\n          var stateParts = state.split('.');\r\n\r\n          if(stateParts.length === 1){\r\n            return true;\r\n          }\r\n\r\n          var entity = stateParts[1];\r\n          var action = stateParts[2];\r\n          if(entity) {\r\n            if(permissionsMap[entity]){\r\n              return angular.isDefined(permissionsMap[entity].routes[entity + '.' + action]);\r\n            }\r\n          }\r\n          return false;\r\n        })\r\n      };\r\n\r\n      this.resetPermissions = function() {\r\n        return RestrictionsAPIService.getRestrictions().then(function(response) {\r\n          service.permissionsMap = response.data;\r\n          return service.permissionsMap;\r\n        });\r\n      };\r\n\r\n\r\n      function getPermissionsMap() {\r\n        if(angular.isDefined(service.permissionsMap)) {\r\n          return $q.when(service.permissionsMap);\r\n        } else {\r\n          return RestrictionsAPIService.getRestrictions().then(function(response) {\r\n            service.permissionsMap = response.data;\r\n            return service.permissionsMap;\r\n          });\r\n        }\r\n      }\r\n\r\n    });\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular.module('components.localize', ['ngCookies']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('components.localize')\n    .directive('localize', function($cookies, $window) {\n\n      return {\n        restrict:    'E',\n        templateUrl: 'app/components/localize/localize.html',\n        link: function($scope, $element, attrs) {\n          $scope.lang = $cookies.get('curLocale') || 'ru';\n          changeText();\n\n          $scope.changeLocale = function(locale) {\n            if($scope.lang !== locale) {\n              $scope.lang = locale;\n              $cookies.put('curLocale', locale);\n              changeText();\n              $window.location.reload();\n            }\n          };\n\n          function changeText() {\n            if($scope.lang == 'en') {\n              $scope.currentLocale = 'English';\n            } else {\n              $scope.currentLocale = 'Русский';\n            }\n          }\n\n        }\n      };\n    });\n\n})();\n\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.entity', [])\r\n    .config(function($provide) {\r\n      $provide.decorator('EntityService', function($delegate, EntityServiceMock, debug) {\r\n        if (debug) {\r\n          $delegate = EntityServiceMock;\r\n        }\r\n        return $delegate;\r\n      });\r\n    })\r\n  ;\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.entity')\r\n    .service('EntityServiceMock', function($http, $httpParamSerializer) {\r\n\r\n\r\n    });\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.entity')\r\n    .service('EntityService', function($q, EntityAPIService) {\r\n      var service = this;\r\n\r\n      service.getLinkedEntities = function(scheme) {\r\n        var entities = Lazy(scheme)\r\n          .map(function(item) {\r\n            if(item.type === 'entity') {\r\n              return EntityAPIService.getEntitiesList(item.entity.model, 0, 0).then(function(response) {\r\n                return {\r\n                  entity: item.entity.model,\r\n                  data: response.data\r\n                };\r\n              });\r\n            }\r\n          })\r\n          .compact()\r\n          .toArray();\r\n\r\n        return $q.all(entities);\r\n      };\r\n    });\r\n\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular.module('app', [\n    'ui.router',\n    'ui.bootstrap',\n    'ngAnimate',\n    'ngTouch',\n    'ngCookies',\n    'ngSanitize',\n    'pascalprecht.translate',\n    'localytics.directives',\n\n    'components.session',\n    'components.restrictions',\n    'components.localize',\n    'components.entity',\n\n    'directives.atomListField',\n    'directives.atomFieldString',\n    'directives.atomFieldPassword',\n    'directives.atomFieldBoolean',\n    'directives.atomFieldEntity',\n\n    'rest.auth',\n    'rest.restrictionsAPI',\n    'rest.entity',\n\n    'demo',\n    'authorization',\n    'page',\n    'errorPage'\n  ]);\n})();\n(function() {\n  'use strict';\n\n  angular.module('app')\n    .run(function($rootScope, $state, $http, SessionService, RestrictionsService) {\n\n      var sessionID = SessionService.getSessionID();\n\n      if(sessionID) {\n        $rootScope.authorized = true;\n      }\n\n      $rootScope.$on('$stateChangeSuccess', function(event, to, toParams, from) {\n\n        $rootScope.activePage = to.name;\n        $rootScope.activeEntity = to.name === 'pagesList' ? 'page' : toParams.entity;\n\n        if(from.name == \"error500\") {\n          $rootScope.activePage = to.name;\n          $rootScope.activeEntity = toParams.entity;\n          $rootScope.hidePanels = false;\n        }\n\n        RestrictionsService.hasPermissions(to.name).then(function(permission) {\n          if(!permission) {$state.go('app')};\n        });\n\n        var authUrls = [ 'login', 'logout' ],\n          sessionID = SessionService.getSessionID();\n\n        //if(sessionID){\n        //  $rootScope.authorized = true;\n        //  EntityService.getEntity('user', SessionService.getUserID()).then(function(response) {\n        //    if(response.data.error && response.data.error.code == 403) {\n        //      $state.go('logout');\n        //    } else {\n        //      $rootScope.userName = response.data.data[0].title;\n        //    }\n        //  }, function() {\n        //    $state.go('logout');\n        //  });\n        //}\n\n        if (!Lazy(authUrls).contains(to.name) && !sessionID) {\n          //$state.go('logout');\n        }\n\n        if (sessionID && to.name === 'login') {\n          $state.go('app');\n        }\n      });\n\n    })\n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .constant('toastr', toastr)\n    .constant('baseURL', '')\n    .constant('debug', false)\n    .constant('loginPeriod', (30*60*1000) );\n\n})();\n(function() {\n  'use strict';\n\n  angular.module('app')\n\n    .config(function($stateProvider, $urlRouterProvider) {\n      $stateProvider\n        .state('app', {\n          url:        '/'\n        })\n      ;\n\n      $urlRouterProvider.otherwise(function($injector) {\n        $injector.get('$state').go('customHandler');\n      });\n    })\n\n    .config(function($translateProvider, baseURL, debug) {\n      var $cookies;\n      angular.injector(['ngCookies']).invoke(['$cookies', function(_$cookies_) {\n        $cookies = _$cookies_;\n      }]);\n\n      var lang = $cookies.get('curLocale') || 'en';\n      if(debug === debug) {\n        $translateProvider.useUrlLoader('app/rest/localize/fixture/translate_' + lang + '.json');\n      } else {\n        $translateProvider.useUrlLoader(baseURL + '/atom/localize/' + lang);\n      }\n      $translateProvider.preferredLanguage(lang);\n    })\n\n    .config(function($locationProvider) {\n      //TODO: Comment for development. There are problems with proxy in HTML5mode\n      $locationProvider.html5Mode(true);\n    })\n\n    .config(function($logProvider, $httpProvider, $stateProvider, toastr) {\n\n      $httpProvider.defaults.headers.post = {'Accept': 'application/json', 'Content-Type': 'application/x-www-form-urlencoded'};\n      $httpProvider.defaults.headers.get = {'Accept': 'application/json'};\n\n      $httpProvider.interceptors.push(function($q, $injector, loginPeriod) {\n        return {\n          request: function(config) {\n            var remember = $injector.get('$cookies').get('rememberMe');\n            var token = $injector.get('$cookies').get('token');\n            var homepage = $injector.get('$cookies').get('homepage');\n\n            if(token && remember === '0') {\n              var loginExpirationDate = new Date();\n              loginExpirationDate.setTime( loginExpirationDate.getTime() + loginPeriod );\n              var tokenCookieParams = {\n                expires: loginExpirationDate,\n                path: '/'\n              };\n              $injector.get('$cookies').put('token', token, tokenCookieParams);\n              $injector.get('$cookies').put('rememberMe', token, tokenCookieParams);\n              $injector.get('$cookies').put('homepage', homepage, tokenCookieParams);\n            }\n\n            return config;\n          },\n          responseError:  function(rejection) {\n            if(rejection.status == 500){\n              $injector.get('$rootScope').errorMessage = rejection.data.error.message;\n              $injector.get('$state').go('error500');\n            }\n            if(rejection.status == 401) {\n              $injector.get('$state').go('logout');\n            } else if(rejection.status == 400) {\n              if(rejection.data.error.message)\n                toastr.error(rejection.data.error.message);\n            } else if(rejection.status == 404) {\n              $injector.get('$rootScope').errorMessage = rejection.data.error.message;\n              //$injector.get('$state').go('error404');\n            } else {\n              Lazy(rejection.data.error.null).each(function(error) {\n                if(error.message)\n                  toastr.error(error.message);\n              });\n            }\n\n            return $q.reject(rejection);\n          }\n        };\n      });\n\n    })\n\n    .config(function(toastr) {\n      toastr.options.timeOut = 3000;\n      toastr.options.positionClass = 'toast-top-right';\n      toastr.options.preventDuplicates = false;\n      toastr.options.closeButton = true;\n    });\n})();\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/localize/localize.html\",\"<ul class=\\\"nav navbar-nav navbar-right localize\\\"><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false><img ng-src=app/assets/{{lang}}.gif>{{ currentLocale }}<span class=caret></span></a><ul class=dropdown-menu><li><a ng-click=\\\"changeLocale(\\'en\\')\\\" href=#><img src=app/assets/en.gif> English</a></li><li><a ng-click=\\\"changeLocale(\\'ru\\')\\\" href=#><img src=app/assets/ru.gif> Русский</a></li></ul></li></ul>\");\n$templateCache.put(\"app/directives/atomFieldBoolean/atomFieldBoolean.html\",\"<span class=input-group-addon><input type=checkbox id=\\\"{{ itemName }}\\\" ng-model=field> </span>\");\n$templateCache.put(\"app/directives/atomFieldEntity/atomFieldEntity.html\",\"<select chosen no_results_text=\\\"\\'Результат не найден\\'\\\" placeholder-text-multiple=\\\"\\'Выберите один или несколько вариантов\\'\\\" placeholder-text-single=\\\"\\'Выберите один вариант\\'\\\" multiple ng-options=\\\"b as b.title for b in list track by b.id\\\" ng-model=entityModel[fieldName]><option value=\\\"\\\"></option></select>\");\n$templateCache.put(\"app/directives/atomFieldPassword/atomFieldPassword.html\",\"<input autocomplete=off id=\\\"{{ itemName }}\\\" placeholder=\\\"\\\" type=password class=form-control ng-model=field>\");\n$templateCache.put(\"app/directives/atomFieldString/atomFieldString.html\",\"<input autocomplete=off id=\\\"{{ itemName }}\\\" placeholder=\\\"\\\" type=text class=form-control ng-model=field>\");\n$templateCache.put(\"app/directives/atomListField/atomListField.html\",\"{{ fieldLabel }}\");\n$templateCache.put(\"app/modules/demo/demo.html\",\"<div class=row><h1 class=demoTitle>DEMO</h1><p class=lead>Use this document as a way to quickly start any new project.<br>All you get is this text and a mostly barebones HTML document.</p><p class=lead localize>test</p></div>\");\n$templateCache.put(\"app/modules/errorPage/404.html\",\"<div class=page-err><div class=\\\"err-container text-center\\\"><div class=err><div class=err-inner><h1>404</h1><h2>Not Found</h2></div></div><div class=err-mss><p>{{$root.errorMessage}}</p></div><div class=err-body><a ui-sref=app class=\\\"btn btn-lg btn-primary\\\"><span class=space></span> Вернуться на главную</a></div></div><!--     <div class=\\\"footer text-center\\\">\\n            Copyright 2016 {{main.brand}} Admin\\n        </div> --></div>\");\n$templateCache.put(\"app/modules/errorPage/500.html\",\"<div class=page-err><div class=\\\"err-container text-center\\\"><div class=err><div class=err-inner><h1>500</h1><h2>Server Error</h2></div></div><div class=err-mss><p>{{$root.errorMessage}}</p></div><div class=err-body><a ui-sref=app class=\\\"btn btn-lg btn-primary\\\"><span class=space></span> Вернуться на главную</a></div></div><!--     <div class=\\\"footer text-center\\\">\\n            Copyright 2016 {{main.brand}} Admin\\n        </div> --></div>\");\n$templateCache.put(\"app/modules/page/page.html\",\"<div class=pageContent ng-bind-html=pageContent></div>\");\n$templateCache.put(\"app/modules/authorization/signin/authorization.html\",\"<div class=page-signin><div class=main-body><div class=container><div class=form-container><form class=form-horizontal ng-submit=makeLogin() autocomplete=off><fieldset><input style=display:none> <input type=password style=display:none><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-envelope\\\"></span></div><input type=email class=\\\"form-control input-lg input-round text-center\\\" placeholder=Email ng-model=user.email></div><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-lock\\\"></span></div><input type=password class=\\\"form-control input-lg input-round text-center\\\" placeholder=Пароль ng-model=user.password></div><div class=form-group><label class=\\\"ui-checkbox rememberMeLabel\\\"><input name=checkbox1 type=checkbox value=option2 ng-model=rememberMe> <span>Запомнить меня</span></label></div><div class=form-group><input type=submit class=\\\"btn btn-primary btn-lg btn-round btn-block text-center\\\" value=Войти></div></fieldset></form></div></div></div></div>\");\n$templateCache.put(\"app/modules/authorization/signup/registration.html\",\"<div class=page-signin><div class=main-body><div class=container><div class=form-container><form class=form-horizontal ng-submit=makeRegistration() autocomplete=off><fieldset><input style=display:none> <input type=password style=display:none><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-envelope\\\"></span></div><input type=email class=\\\"form-control input-lg input-round text-center\\\" placeholder=Email ng-model=user.email></div><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-lock\\\"></span></div><input type=password class=\\\"form-control input-lg input-round text-center\\\" placeholder=Пароль ng-model=user.password></div><div class=form-group><input type=submit class=\\\"btn btn-primary btn-lg btn-round btn-block text-center\\\" value=Зарегистироваться></div></fieldset></form></div></div></div></div>\");\n$templateCache.put(\"app/modules/demo/read/demoRead.html\",\"<h1>DEMO READ</h1><p class=lead translate>test</p>\");}]);"],"sourceRoot":"/source/"}
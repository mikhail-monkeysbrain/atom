{"version":3,"sources":["scripts/app.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","url","otherwise","views","content@","templateUrl","controller","$scope","foo","$state","AuthService","makeRegistration","register","user","then","response","data","success","toastr","message","go","error","$rootScope","$document","$http","$cookies","SessionService","RestrictionsService","$stateParams","loginPeriod","yearFuther","rememberMe","is","hidePanels","authorized","undefined","getSessionID","setSessionID","remove","logout","resetPermissions","makeLogin","login","loginExpirationDate","Date","tokenCookieParams","path","setTime","getTime","expires","token","setUserID","_id","$id","userName","name","put","$provide","decorator","$delegate","$location","AuthServiceMock","debug","service","$httpParamSerializer","baseURL","this","getRestrictions","get","RestrictionsAPIServiceMock","EntityServiceMock","getEntities","getEntitiesList","entity","getEntityDescription","getEntityPage","page","limit","getEntity","id","saveEntity","removeEntity","sortField","sortOrder","searchKeywords","sort","search","isNew","hasFileField","saveMethod","post","headers","X-Requested-With","Content-Type","Accept","exportEntity","condition","length","i","push","join","anchor","element","attr","href","target","click","getLinkedEntities","queries","j","request","file","email","indexOf","properties","value","Session","getUserID","userId","expireDate","sessionId","$q","RestrictionsAPIService","getPermissionsMap","isDefined","permissionsMap","when","hasPermissions","stateParts","split","action","routes","directive","$window","restrict","link","$element","attrs","changeText","lang","currentLocale","changeLocale","locale","location","reload","run","sessionID","$on","event","to","toParams","from","activePage","activeEntity","permission","authUrls","Lazy","contains","constant","$logProvider","$httpProvider","$locationProvider","$translateProvider","injector","invoke","_$cookies_","html5Mode","defaults","useUrlLoader","preferredLanguage","interceptors","$injector","remember","homepage","responseError","rejection","status","errorMessage","each","reject","options","timeOut","positionClass","preventDuplicates","closeButton","$templateCache"],"mappings":"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","file":"scripts/app-2575257008.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular\n    .module('demo', [])\n    .config(function($stateProvider, $urlRouterProvider) {\n\n      $stateProvider\n        .state('app', {\n          url:        '/'\n          //, abstract: true\n        })\n      ;\n\n      $urlRouterProvider.otherwise('/');\n\n      $stateProvider\n        .state('app.demo', {\n          url: 'demo'\n          , views: {\n            'content@': {\n              templateUrl:  'app/modules/demo/demo.html'\n              , controller: 'DemoCtrl'\n            }\n          }\n        })\n        .state('app.demo.read', {\n          url: '/:id'\n          , views: {\n            'content@': {\n              templateUrl:  'app/modules/demo/read/demoRead.html'\n              , controller: 'DemoReadCtrl'\n            }\n          }\n        })\n      ;\n    });\n\n})();\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('demo')\r\n    .controller('DemoReadCtrl', function($scope) {\r\n\r\n      $scope.foo = 'test'\r\n\r\n    });\r\n\r\n})();\n(function() {\n'use strict';\n\n  angular.module('authorization', [])\n    .config(function($stateProvider, $urlRouterProvider) {\n      $urlRouterProvider.otherwise('/');\n//TODO: Refactor!\n      $stateProvider\n        .state('login', {\n          url: '/login',\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/authorization/signin/authorization.html',\n              controller: 'AuthorizationCtrl'\n            }\n          }\n        })\n        .state('logout', {\n          url: '/logout',\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/authorization/signin/authorization.html',\n              controller: 'AuthorizationCtrl'\n            }\n          }\n        })\n        .state('register', {\n          url: '/signup',\n          views: {\n            'content@': {\n              templateUrl:  'app/modules/authorization/signup/registration.html',\n              controller: 'RegistrationCtrl'\n            }\n          }\n        })\n        ;\n    })\n    ;\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('authorization')\n    .controller('RegistrationCtrl', function($scope, $state, AuthService) {\n\n      $scope.makeRegistration = function() {\n        AuthService.register($scope.user).then(function(response) {\n\n          if(response.data.success) {\n            toastr.success(response.data.success.message);\n            $state.go('login');\n          } else {\n            toastr.error(response.data.error.message);\n          }\n        });\n      };\n\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('authorization')\n    .controller('AuthorizationCtrl', function($scope, $rootScope, $state, $document, $http, $cookies, AuthService, toastr, SessionService, RestrictionsService, $stateParams, loginPeriod) {\n\n      var yearFuther = 1000*60*60*24*365;\n      $scope.rememberMe = true;\n\n      if($state.is('logout')) {\n        $rootScope.hidePanels = true;\n        $rootScope.authorized = false;\n        if(SessionService.getSessionID() !== undefined) {\n          SessionService.setSessionID(undefined);\n          $cookies.remove('token');\n          $cookies.remove('rememberMe');\n          AuthService.logout().then(function() {\n            RestrictionsService.resetPermissions().then(function() {\n              $state.go('app');\n            });\n          });\n        }\n        $state.go('login');\n      }\n\n      $scope.makeLogin = function() {\n        AuthService.login($scope.user)\n          .then(function(response) {\n            if(response.data.success) {\n\n              var loginExpirationDate = new Date();\n              var tokenCookieParams = {\n                path: '/'\n              };\n\n              if($scope.rememberMe) {\n                loginExpirationDate.setTime( loginExpirationDate.getTime() + yearFuther );\n              }else{\n                loginExpirationDate.setTime( loginExpirationDate.getTime() + loginPeriod );\n              }\n\n              tokenCookieParams.expires = loginExpirationDate;\n\n\n              SessionService.setSessionID(response.data.success.user.token);\n              SessionService.setUserID(response.data.success.user._id.$id);\n              toastr.success(response.data.success.message);\n\n              $rootScope.authorized = true;\n              $rootScope.userName = response.data.success.user.name;\n              $cookies.put('token', response.data.success.user.token, tokenCookieParams);\n              $cookies.put('rememberMe', $scope.rememberMe ? 1 : 0, tokenCookieParams);\n\n              RestrictionsService.resetPermissions().then(function() {\n                $state.go('app');\n              });\n\n\n            } else {\n              toastr.error(response.data.error.message);\n            }\n          })\n\n      };\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.auth', [])\n    .config(function($provide) {\n      $provide.decorator('AuthService', function($delegate, $location, AuthServiceMock, debug) {\n        if (debug) {\n          $delegate = AuthServiceMock;\n        }\n        return $delegate;\n      });\n    })\n  ;\n\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('rest.auth')\r\n    .service('RestrictionsAPIService', function($http, $httpParamSerializer, baseURL) {\r\n\r\n      this.getRestrictions = function() {\r\n        return $http.get(baseURL + '/atom/entities/');\r\n      };\r\n\r\n    });\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('rest.restrictionsAPI', [])\r\n    .config(function($provide) {\r\n      $provide.decorator('RestrictionsAPIService', function($delegate, $location, RestrictionsAPIServiceMock, debug) {\r\n        if (debug) {\r\n          $delegate = RestrictionsAPIServiceMock;\r\n        }\r\n        return $delegate;\r\n      });\r\n    })\r\n  ;\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('rest.restrictionsAPI')\r\n    .service('RestrictionsAPIServiceMock', function($http) {\r\n\r\n      this.getRestrictions = function() {\r\n        return $http.get('/app/rest/restrictions/fixture/restrictions.json');\r\n      };\r\n\r\n    });\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular.module('rest.entity', [])\n    .config(function($provide) {\n      $provide.decorator('EntityService', function($delegate, EntityServiceMock, debug) {\n        if (debug) {\n          $delegate = EntityServiceMock;\n        }\n        return $delegate;\n      });\n    })\n  ;\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.entity')\n    .service('EntityServiceMock', function($http, $httpParamSerializer) {\n\n      this.getEntities = function() {\n        return $http.get('/app/rest/entity/fixture/entities.json');\n      };\n\n      this.getEntitiesList = function(entity) {\n        return $http.get('/app/rest/entity/fixture/usersList.json');\n      };\n\n      this.getEntityDescription = function(entity) {\n        return $http.get('/app/rest/entity/fixture/usersDescription.json');\n      };\n\n      this.getEntityPage = function(entity, page, limit) {\n        if(page === 0) {\n          return $http.get('/app/rest/entity/fixture/usersPage1.json');\n        } else {\n          return $http.get('/app/rest/entity/fixture/usersPage2.json');\n        }\n      };\n\n      this.getEntity = function(entity, id) {\n        return $http.get('/app/rest/entity/fixture/userExample.json');\n      };\n\n      this.saveEntity = function(entity, data) {\n        return $http.get('/app/rest/entity/fixture/userSaved.json', $httpParamSerializer(data));\n      };\n\n      this.removeEntity = function(entity, data) {\n        return $http.get('/app/rest/entity/fixture/userSaved.json', $httpParamSerializer(data));\n      };\n\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.entity')\n    .service('EntityService', function($http, $httpParamSerializer, baseURL) {\n      this.getEntities = function() {\n        return $http.get(baseURL + '/atom/entities/');\n      };\n\n      this.getEntitiesList = function(entity, limit) {\n        limit = limit || 0;\n        return $http.get(baseURL + '/' + entity + \"/?condition[enabled][$ne]=null&limit=\" + limit);\n      };\n\n      this.getEntityDescription = function(entity) {\n        return $http.get(baseURL + '/atom/entities/' + entity + '/');\n      };\n\n      this.getEntityPage = function(entity, page, limit, sortField, sortOrder, searchKeywords) {\n        var sort = !!(sortField && sortOrder) ? '&sort[' + sortField + ']=' + sortOrder : '';\n        var search = !!searchKeywords ? '&condition[$search]=' + searchKeywords : '';\n        return $http.get(baseURL + '/' + entity + '/page/' + page + '/?condition[enabled][$ne]=null&limit=' + limit + sort + search);\n      };\n\n      this.getEntity = function(entity, id) {\n        return $http.get(baseURL + '/' + entity + '/' + id + '/');\n      };\n\n      this.saveEntity = function(entity, data, isNew, hasFileField) {\n        var saveMethod = typeof data._id === 'undefined' && isNew ? 'create' : 'update';\n\n        if(hasFileField){\n          return $http.post(baseURL + '/' + entity + '/' + saveMethod + '/', data, {headers: {\n            'X-Requested-With': 'XMLHttpRequest'\n            , 'Content-Type':     undefined\n            , 'Accept':           'application/json'\n          }} );\n        } else {\n          return $http.post(baseURL + '/' + entity + '/' + saveMethod + '/', $httpParamSerializer(data));\n        }\n\n      };\n\n      this.removeEntity = function(entity, data) {\n        return $http.post(baseURL + '/' + entity + '/delete/', $httpParamSerializer(data));\n      };\n\n      this.exportEntity = function(entity, data, sortField, sortOrder) {\n        var condition = [];\n        //var condition = 'condition[_id][$in][]=561fe8ae572b94d3358b4567&condition[_id][$in][]=5613e72e572b94274d8b4567&condition[_id][$in][]=5613e6e3572b94114d8b4567';\n        if(data.length) {\n          for(var i = 0; i < data.length; i++) {\n            condition.push( 'condition[_id][$in][]=' + data[i]);\n          }\n        }\n        condition = condition.join('&');\n        var sort = !!(sortField && sortOrder) ? '&sort[' + sortField + ']=' + sortOrder : '';\n        //return $http.get(baseURL + '/' + entity + '/export/?' + condition + sort, {\n        //  headers: {'Accept': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet; charset=utf-8'}\n        //});\n        var anchor = angular.element('#downloadLink');\n        anchor.attr({\n          href: baseURL + '/' + entity + '/export/?' + condition + sort,\n          target: '_self',\n        })[0].click();\n      };\n\n      this.getLinkedEntities = function(entity, data) {\n        var condition = [];\n        var queries = [];\n        if(data.length) {\n          var i, j;\n          for(i = 0, j = 0; i < data.length; i++, j++) {\n            if (data[i]) {\n              condition.push('condition[_id][$in][]=' + data[i].$id);\n            }\n            if(j == 19 || i == data.length-1) {\n              condition = condition.join('&');\n              queries.push($http.get(baseURL + '/' + entity + '/?' + condition + '&limit=0'));\n              j = -1;\n              condition = [];\n            }\n          }\n        }\n\n        return queries;\n      }\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.auth')\n    .service('AuthServiceMock', function($http) {\n      this.logout = function() {\n        return $http.get('/app/rest/auth/fixture/logout_success.json');\n      };\n\n      this.login = function(request) {\n\n        var file = (request.email.indexOf('test') === 0)\n          ? 'auth.json'\n          : 'auth_fail.json'\n          ;\n\n        return $http.get('/app/rest/auth/fixture/' + file);\n      };\n\n      this.register = function(request) {\n\n        var file = (request.email.indexOf('test') === 0)\n            ? 'register.json'\n            : 'register_fail.json'\n          ;\n\n        return $http.get('/app/rest/auth/fixture/' + file);\n      };\n\n    });\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('rest.auth')\n    .service('AuthService', function($http, $httpParamSerializer, baseURL) {\n      this.logout = function() {\n        return $http.get(baseURL + '/user/logout/');\n      };\n\n      this.login = function(request) {\n        return $http.post(baseURL + '/user/auth/pass/', $httpParamSerializer(request));\n      };\n\n      this.register = function(request) {\n        return $http.post(baseURL + '/user/auth/register/', $httpParamSerializer(request));\n      };\n\n\n      this.properties = function() {\n        return $http.get(baseURL + '/atom/properties/');\n      };\n\n    });\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('demo')\n    .controller('DemoCtrl', function($scope) {\n\n      $scope.foo = 'test'\n\n    });\n\n})();\n(function() {\n  'use strict';\n\n  angular.module('components.session', [])\n    .value('Session', {});\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('components.session')\n    .service('SessionService', function SessionService($cookies, Session) {\n\n      this.getUserID = function() {\n        return $cookies.get('userId');\n      };\n\n      this.setUserID = function(userId) {\n        var expireDate = new Date();\n        expireDate.setTime(expireDate.getTime() + 3*60*60*1000);\n        return $cookies.put('userId', userId, { expires: expireDate });\n      };\n\n      this.setSessionID = function(sessionId) {\n        //TODO: Remove storage in cookies for prod\n        var expireDate = new Date();\n        expireDate.setTime(expireDate.getTime() + 3*60*60*1000);\n        return $cookies.put('sessionId', sessionId, { expires: expireDate });\n      };\n\n      this.getSessionID = function() {\n        return $cookies.get('sessionId');\n      };\n\n    });\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.restrictions', [])\r\n\r\n})();\n(function() {\r\n  'use strict';\r\n\r\n  angular.module('components.restrictions')\r\n    .service('RestrictionsService', function RestrictionsService($q, RestrictionsAPIService) {\r\n\r\n      var service = this;\r\n\r\n      this.hasPermissions = function(state) {\r\n        return getPermissionsMap().then(function(permissionsMap) {\r\n          var stateParts = state.split('.');\r\n\r\n          if(stateParts.length === 1){\r\n            return true;\r\n          }\r\n\r\n          var entity = stateParts[1];\r\n          var action = stateParts[2];\r\n          if(entity) {\r\n            if(permissionsMap[entity]){\r\n              return angular.isDefined(permissionsMap[entity].routes[entity + '.' + action]);\r\n            }\r\n          }\r\n          return false;\r\n        })\r\n      };\r\n\r\n      this.resetPermissions = function() {\r\n        return RestrictionsAPIService.getRestrictions().then(function(response) {\r\n          service.permissionsMap = response.data;\r\n          return service.permissionsMap;\r\n        });\r\n      };\r\n\r\n\r\n      function getPermissionsMap() {\r\n        if(angular.isDefined(service.permissionsMap)) {\r\n          return $q.when(service.permissionsMap);\r\n        } else {\r\n          return RestrictionsAPIService.getRestrictions().then(function(response) {\r\n            service.permissionsMap = response.data;\r\n            return service.permissionsMap;\r\n          });\r\n        }\r\n      }\r\n\r\n    });\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular.module('components.localize', ['ngCookies']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular.module('components.localize')\n    .directive('localize', function($cookies, $window) {\n\n      return {\n        restrict:    'E',\n        templateUrl: 'app/components/localize/localize.html',\n        link: function($scope, $element, attrs) {\n          $scope.lang = $cookies.get('curLocale') || 'en';\n          changeText();\n\n          $scope.changeLocale = function(locale) {\n            if($scope.lang !== locale) {\n              $scope.lang = locale;\n              $cookies.put('curLocale', locale);\n              changeText();\n              $window.location.reload();\n            }\n          };\n\n          function changeText() {\n            if($scope.lang == 'en') {\n              $scope.currentLocale = 'English';\n            } else {\n              $scope.currentLocale = 'Русский';\n            }\n          }\n\n        }\n      };\n    });\n\n})();\n\n\n(function() {\n  'use strict';\n\n  angular.module('app', [\n    'ui.router',\n    'ui.bootstrap',\n    'ngAnimate',\n    'ngTouch',\n    'ngCookies',\n    'ngSanitize',\n    'pascalprecht.translate',\n\n    'components.session',\n    'components.restrictions',\n    'components.localize',\n\n    'rest.auth',\n    'rest.restrictionsAPI',\n    'rest.entity',\n\n    'demo',\n    'authorization'\n  ]);\n})();\n(function() {\n  'use strict';\n\n  angular.module('app')\n    .run(function($rootScope, $state, $http, SessionService, RestrictionsService) {\n\n      var sessionID = SessionService.getSessionID();\n\n      if(sessionID) {\n        $rootScope.authorized = true;\n      }\n\n      $rootScope.$on('$stateChangeSuccess', function(event, to, toParams, from) {\n\n        $rootScope.activePage = to.name;\n        $rootScope.activeEntity = to.name === 'pagesList' ? 'page' : toParams.entity;\n\n        if(from.name == \"error500\") {\n          $rootScope.activePage = to.name;\n          $rootScope.activeEntity = toParams.entity;\n          $rootScope.hidePanels = false;\n        }\n\n        RestrictionsService.hasPermissions(to.name).then(function(permission) {\n          if(!permission) {$state.go('app')};\n        });\n\n        var authUrls = [ 'login', 'logout' ],\n          sessionID = SessionService.getSessionID();\n\n        //if(sessionID){\n        //  $rootScope.authorized = true;\n        //  EntityService.getEntity('user', SessionService.getUserID()).then(function(response) {\n        //    if(response.data.error && response.data.error.code == 403) {\n        //      $state.go('logout');\n        //    } else {\n        //      $rootScope.userName = response.data.data[0].title;\n        //    }\n        //  }, function() {\n        //    $state.go('logout');\n        //  });\n        //}\n\n        if (!Lazy(authUrls).contains(to.name) && !sessionID) {\n          //$state.go('logout');\n        }\n\n        if (sessionID && to.name === 'login') {\n          $state.go('app');\n        }\n      });\n\n    })\n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .constant('toastr', toastr)\n    .constant('baseURL', '')\n    .constant('debug', true)\n    .constant('loginPeriod', (30*60*1000) );\n\n})();\n(function() {\n  'use strict';\n\n  angular.module('app')\n    .config(function($logProvider, $httpProvider, $stateProvider, $locationProvider, $translateProvider, toastr, $provide, baseURL, debug) {\n      var $cookies;\n      angular.injector(['ngCookies']).invoke(['$cookies', function(_$cookies_) {\n        $cookies = _$cookies_;\n      }]);\n\n\n      $locationProvider.html5Mode(true);\n\n      $httpProvider.defaults.headers.post = {'Accept': 'application/json', 'Content-Type': 'application/x-www-form-urlencoded'};\n      $httpProvider.defaults.headers.get = {'Accept': 'application/json'};\n\n      var lang = $cookies.get('curLocale') || 'en';\n      if(debug) {\n        $translateProvider.useUrlLoader('app/rest/localize/fixture/translate_' + lang + '.json');\n      } else {\n        $translateProvider.useUrlLoader(baseURL + '/atom/localize/' + lang);\n      }\n      $translateProvider.preferredLanguage(lang);\n\n      $httpProvider.interceptors.push(function($q, $injector, loginPeriod) {\n        return {\n          request: function(config) {\n            var remember = $injector.get('$cookies').get('rememberMe');\n            var token = $injector.get('$cookies').get('token');\n            var homepage = $injector.get('$cookies').get('homepage');\n\n            if(token && remember === '0') {\n              var loginExpirationDate = new Date();\n              loginExpirationDate.setTime( loginExpirationDate.getTime() + loginPeriod );\n              var tokenCookieParams = {\n                expires: loginExpirationDate,\n                path: '/'\n              };\n              $injector.get('$cookies').put('token', token, tokenCookieParams);\n              $injector.get('$cookies').put('rememberMe', token, tokenCookieParams);\n              $injector.get('$cookies').put('homepage', homepage, tokenCookieParams);\n            }\n\n            return config;\n          },\n          responseError:  function(rejection) {\n            if(rejection.status == 500){\n              $injector.get('$rootScope').errorMessage = rejection.data.error.message;\n              $injector.get('$state').go('error500');\n            }\n            if(rejection.status == 401) {\n              $injector.get('$state').go('logout');\n            } else if(rejection.status == 400) {\n              if(rejection.data.error.message)\n                toastr.error(rejection.data.error.message);\n            } else {\n              Lazy(rejection.data.error.null).each(function(error) {\n                if(error.message)\n                  toastr.error(error.message);\n              });\n            }\n\n            return $q.reject(rejection);\n          }\n        };\n      });\n\n      // Set options third-party lib\n      toastr.options.timeOut = 3000;\n      toastr.options.positionClass = 'toast-top-right';\n      toastr.options.preventDuplicates = false;\n      toastr.options.closeButton = true;\n\n    });\n})();\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/localize/localize.html\",\"<ul class=\\\"nav navbar-nav navbar-right localize\\\"><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false><img ng-src=app/assets/{{lang}}.gif>{{ currentLocale }}<span class=caret></span></a><ul class=dropdown-menu><li><a ng-click=\\\"changeLocale(\\'en\\')\\\" href=#><img src=app/assets/en.gif> English</a></li><li><a ng-click=\\\"changeLocale(\\'ru\\')\\\" href=#><img src=app/assets/ru.gif> Русский</a></li></ul></li></ul>\");\n$templateCache.put(\"app/modules/demo/demo.html\",\"<div class=row><h1 class=demoTitle>DEMO</h1><p class=lead>Use this document as a way to quickly start any new project.<br>All you get is this text and a mostly barebones HTML document.</p><p class=lead localize>test</p></div>\");\n$templateCache.put(\"app/modules/authorization/signin/authorization.html\",\"<div class=page-signin><div class=main-body><div class=container><div class=form-container><form class=form-horizontal ng-submit=makeLogin() autocomplete=off><fieldset><input style=display:none> <input type=password style=display:none><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-envelope\\\"></span></div><input type=email class=\\\"form-control input-lg input-round text-center\\\" placeholder=Email ng-model=user.email></div><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-lock\\\"></span></div><input type=password class=\\\"form-control input-lg input-round text-center\\\" placeholder=Пароль ng-model=user.password></div><div class=form-group><label class=\\\"ui-checkbox rememberMeLabel\\\"><input name=checkbox1 type=checkbox value=option2 ng-model=rememberMe> <span>Запомнить меня</span></label></div><div class=form-group><input type=submit class=\\\"btn btn-primary btn-lg btn-round btn-block text-center\\\" value=Войти></div></fieldset></form></div></div></div></div>\");\n$templateCache.put(\"app/modules/authorization/signup/registration.html\",\"<div class=page-signin><div class=main-body><div class=container><div class=form-container><form class=form-horizontal ng-submit=makeRegistration() autocomplete=off><fieldset><input style=display:none> <input type=password style=display:none><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-envelope\\\"></span></div><input type=email class=\\\"form-control input-lg input-round text-center\\\" placeholder=Email ng-model=user.email></div><div class=form-group><div class=\\\"btn-icon-lined btn-icon-round btn-icon-sm btn-default-light\\\"><span class=\\\"glyphicon glyphicon-lock\\\"></span></div><input type=password class=\\\"form-control input-lg input-round text-center\\\" placeholder=Пароль ng-model=user.password></div><div class=form-group><input type=submit class=\\\"btn btn-primary btn-lg btn-round btn-block text-center\\\" value=Зарегистироваться></div></fieldset></form></div></div></div></div>\");\n$templateCache.put(\"app/modules/demo/read/demoRead.html\",\"<h1>DEMO READ</h1><p class=lead translate>test</p>\");}]);"],"sourceRoot":"/source/"}